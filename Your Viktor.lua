
assert(load(Base64Decode("aWYgbm90IFZJUF9VU0VSIGFuZCBteUhlcm8uY2hhck5hbWUgfj0gIlZpa3RvciIgdGhlbiByZXR1cm4gZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIEF1dG91cGRhdGVyTXNnKG1zZykgcHJpbnQoIjxmb250IGNvbG9yPVwiIzY2OTlmZlwiPjxiPllvdXIgVmlrdG9yOjwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiIuLm1zZy4uIi48L2ZvbnQ+IikgZW5kDQpsb2NhbCBVUERBVEVfSE9TVCA9ICJyYXcuZ2l0aHViLmNvbSINCg0KbG9jYWwgcGFzcyA9IGZhbHNlDQpsb2NhbCBJRCA9IF9HLkdldFVzZXIoKQ0KDQpsb2NhbCBQYXNzQ2hlY2sgPSBHZXRXZWJSZXN1bHQoVVBEQVRFX0hPU1QsICIva2VqMTE5MS9QYXNzVXNlci9tYXN0ZXIvdmVyc2lvbi8iLi5JRC4uIi5wYXNzIikNCg0KaWYgUGFzc0NoZWNrIH49IG5pbCB0aGVuDQoJQXV0b3VwZGF0ZXJNc2coIldlbGxDb21lICIuLklEKQ0KCXBhc3MgPSB0cnVlDQplbmQNCg0KaWYgcGFzcyA9PSBmYWxzZSB0aGVuDQoJQXV0b3VwZGF0ZXJNc2coIllvdSBBcmUgTm90IFBhc3MgVXNlIikNCglyZXR1cm4NCmVuZA0KDQoNCmxvY2FsIHZlcnNpb24gPSAxLjAwDQpsb2NhbCBBVVRPX1VQREFURSA9IHRydWUNCmxvY2FsIFVQREFURV9IT1NUID0gInJhdy5naXRodWIuY29tIg0KbG9jYWwgVVBEQVRFX1BBVEggPSAiL2ppbmV5bmUvYm9sL21hc3Rlci9Zb3VyIFZpa3Rvci5sdWEiLi4iP3JhbmQ9Ii4ubWF0aC5yYW5kb20oMSwxMDAwMCkNCmxvY2FsIFVQREFURV9GSUxFX1BBVEggPSBTQ1JJUFRfUEFUSC4uIllvdXIgVmlrdG9yLmx1YSINCmxvY2FsIFVQREFURV9VUkwgPSAiaHR0cHM6Ly8iLi5VUERBVEVfSE9TVC4uVVBEQVRFX1BBVEgNCg0KDQppZiBBVVRPX1VQREFURSB0aGVuDQoJbG9jYWwgU2VydmVyRGF0YSA9IEdldFdlYlJlc3VsdChVUERBVEVfSE9TVCwgIi9qaW5leW5lL2JvbC9tYXN0ZXIvdmVyc2lvbi9Zb3VyIFZpa3Rvci52ZXJzaW9uIikNCglpZiBTZXJ2ZXJEYXRhIHRoZW4NCgkJU2VydmVyVmVyc2lvbiA9IHR5cGUodG9udW1iZXIoU2VydmVyRGF0YSkpID09ICJudW1iZXIiIGFuZCB0b251bWJlcihTZXJ2ZXJEYXRhKSBvciBuaWwNCgkJaWYgU2VydmVyVmVyc2lvbiB0aGVuDQoJCQlpZiB0b251bWJlcih2ZXJzaW9uKSA8IFNlcnZlclZlcnNpb24gdGhlbg0KCQkJCUF1dG91cGRhdGVyTXNnKCJOZXcgdmVyc2lvbiBhdmFpbGFibGUiLi5TZXJ2ZXJWZXJzaW9uKQ0KCQkJCUF1dG91cGRhdGVyTXNnKCJVcGRhdGluZywgcGxlYXNlIGRvbid0IHByZXNzIEY5IikNCgkJCQlEZWxheUFjdGlvbihmdW5jdGlvbigpIERvd25sb2FkRmlsZShVUERBVEVfVVJMLCBVUERBVEVfRklMRV9QQVRILCBmdW5jdGlvbiAoKSBBdXRvdXBkYXRlck1zZygiU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuICgiLi52ZXJzaW9uLi4iID0+ICIuLlNlcnZlclZlcnNpb24uLiIpLCBwcmVzcyBGOSB0d2ljZSB0byBsb2FkIHRoZSB1cGRhdGVkIHZlcnNpb24uIikgZW5kKSBlbmQsIDMpDQoJCQllbHNlDQoJCQkJQXV0b3VwZGF0ZXJNc2coIllvdSBoYXZlIGdvdCB0aGUgbGF0ZXN0IHZlcnNpb24gKCIuLlNlcnZlclZlcnNpb24uLiIpIikNCgkJCWVuZA0KCQllbmQNCgllbHNlDQoJCUF1dG91cGRhdGVyTXNnKCJFcnJvciBkb3dubG9hZGluZyB2ZXJzaW9uIGluZm8iKQ0KCWVuZA0KZW5kDQoNCg0KcmVxdWlyZSAiU291cmNlTGliIg0KcmVxdWlyZSAiRGl2aW5lUHJlZCINCg0KbG9jYWwgUSA9IHtSYW5jZSA9IDc0MCwgSXNSZWFkeSA9IGZ1bmN0aW9uKCkgcmV0dXJuIG15SGVybzpDYW5Vc2VTcGVsbChfUSkgPT0gUkVBRFkgZW5kLCBEYW1hZ2UgPSBmdW5jdGlvbih0YXJnZXQpIHJldHVybiBnZXREbWcoIlEiLCB0YXJnZXQsIG15SGVybykgZW5kLH0NCmxvY2FsIFcgPSB7UmFuY2UgPSA3MDAsIElzUmVhZHkgPSBmdW5jdGlvbigpIHJldHVybiBteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZIGVuZCwgRGFtYWdlID0gZnVuY3Rpb24odGFyZ2V0KSByZXR1cm4gZ2V0RG1nKCJXIiwgdGFyZ2V0LCBteUhlcm8pIGVuZCx9DQpsb2NhbCBFID0ge1JhbmNlID0gNzYwLCBTcGVlZCA9IDc1MCwgTWluUmFuY2UgPSA1NDAsIE1heFJhbmNlID0gMTIwMCwgUmFkaXVzID0gNzUsIERlbGF5ID0gMTI1LCBJc1JlYWR5ID0gZnVuY3Rpb24oKSByZXR1cm4gbXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBlbmQsIERhbWFnZSA9IGZ1bmN0aW9uKHRhcmdldCkgcmV0dXJuIGdldERtZygiRSIsIHRhcmdldCwgbXlIZXJvKSBlbmQsfQ0KbG9jYWwgUiA9IHtSYW5jZSA9IDcwMCwgSXNSZWFkeSA9IGZ1bmN0aW9uKCkgcmV0dXJuIG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkgZW5kLCBEYW1hZ2UgPSBmdW5jdGlvbih0YXJnZXQpIHJldHVybiBnZXREbWcoIlIiLCB0YXJnZXQsIG15SGVybykgZW5kLH0NCg0KbG9jYWwgRW5lbXlNaW5pb25zID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksIDE1MDAsIHBsYXllciwgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCmxvY2FsIHZpa3RvckUgPSBMaW5lU1MoRS5TcGVlZCxFLlJhbmNlLEUuUmFkaXVzLEUuRGVsYXksbWF0aC5odWdlKQ0KbG9jYWwgcGxheWVyID0gbXlIZXJvDQpsb2NhbCB0cywgU3hPDQpsb2NhbCBNTUFMb2FkZWQsIFN4T0xvYWRlZCwgUmVib3JuTG9hZGVkLCBSZXZhbXBlZExvYWRlZCA9IGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlDQpsb2NhbCBlbmVteUhlcm9lcyA9IEdldEVuZW15SGVyb2VzKCkNCmxvY2FsIEp1bmdsZU1vYnMgPSB7fQ0KbG9jYWwgSnVuZ2xlRm9jdXNNb2JzID0ge30NCg0KbG9jYWwgVG9JbnRlcnJ1cHQgPSB7fQ0KbG9jYWwgSW50ZXJydXB0ID0ge30NCmxvY2FsIEludGVycnVwdExpc3QgPSB7DQogICAge2NoYXJOYW1lID0gIkNhaXRseW4iLCBzcGVsbE5hbWUgPSAiQ2FpdGx5bkFjZWludGhlSG9sZSJ9LA0KICAgIHtjaGFyTmFtZSA9ICJGaWRkbGVTdGlja3MiLCBzcGVsbE5hbWUgPSAiQ3Jvd3N0b3JtIn0sDQogICAge2NoYXJOYW1lID0gIkZpZGRsZVN0aWNrcyIsIHNwZWxsTmFtZSA9ICJEcmFpbiJ9LA0KICAgIHtjaGFyTmFtZSA9ICJHYWxpbyIsIHNwZWxsTmFtZSA9ICJHYWxpb0lkb2xPZkR1cmFuZCJ9LA0KICAgIHtjaGFyTmFtZSA9ICJLYXJ0aHVzIiwgc3BlbGxOYW1lID0gIkZhbGxlbk9uZSJ9LA0KICAgIHtjaGFyTmFtZSA9ICJLYXRhcmluYSIsIHNwZWxsTmFtZSA9ICJLYXRhcmluYVIifSwNCiAgICB7Y2hhck5hbWUgPSAiTWFsemFoYXIiLCBzcGVsbE5hbWUgPSAiQWxaYWhhck5ldGhlckdyYXNwIn0sDQogICAge2NoYXJOYW1lID0gIk1pc3NGb3J0dW5lIiwgc3BlbGxOYW1lID0gIk1pc3NGb3J0dW5lQnVsbGV0VGltZSJ9LA0KICAgIHtjaGFyTmFtZSA9ICJOdW51Iiwgc3BlbGxOYW1lID0gIkFic29sdXRlWmVybyJ9LA0KICAgIHtjaGFyTmFtZSA9ICJQYW50aGVvbiIsIHNwZWxsTmFtZSA9ICJQYW50aGVvbl9HcmFuZFNreWZhbGxfSnVtcCJ9LA0KICAgIHtjaGFyTmFtZSA9ICJTaGVuIiwgc3BlbGxOYW1lID0gIlNoZW5TdGFuZFVuaXRlZCJ9LA0KICAgIHtjaGFyTmFtZSA9ICJVcmdvdCIsIHNwZWxsTmFtZSA9ICJVcmdvdFN3YXAyIn0sDQogICAge2NoYXJOYW1lID0gIlZhcnVzIiwgc3BlbGxOYW1lID0gIlZhcnVzUSJ9LA0KICAgIHtjaGFyTmFtZSA9ICJXYXJ3aWNrIiwgc3BlbGxOYW1lID0gIkluZmluaXRlRHVyZXNzIn0NCn0NCg0KbG9jYWwgZnVuY3Rpb24gT3JiTG9hZCgpDQoJaWYgX0cuTU1BX0xvYWRlZCB0aGVuDQoJCU1NQUxvYWRlZCA9IHRydWUNCgkJQXV0b3VwZGF0ZXJNc2coIkZvdW5kIE1NQSIpDQoJZWxzZWlmIF9HLkF1dG9DYXJyeSB0aGVuDQoJCWlmIF9HLkF1dG9DYXJyeS5IZWxwZXIgdGhlbg0KCQkJUmVib3JuTG9hZGVkID0gdHJ1ZQ0KCQkJQXV0b3VwZGF0ZXJNc2coIkZvdW5kIFNBQzogUmVib3JuIikNCgkJZWxzZQ0KCQkJUmV2YW1wZWRMb2FkZWQgPSB0cnVlDQoJCQlBdXRvdXBkYXRlck1zZygiRm91bmQgU0FDOiBSZXZhbXBlZCIpDQoJCWVuZA0KCWVsc2VpZiBfRy5SZWJvcm5fTG9hZGVkIHRoZW4NCgkJRGVsYXlBY3Rpb24oT3JiTG9hZCwgMSkNCgllbHNlaWYgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KCQlyZXF1aXJlICdTeE9yYldhbGsnDQoJCVN4TyA9IFN4T3JiV2FsaygpDQoJCVN4T0xvYWRlZCA9IHRydWUNCgkJQXV0b3VwZGF0ZXJNc2coIkxvYWRlZCBTeE9yYiIpDQoJZWxzZQ0KCQlBdXRvdXBkYXRlck1zZygiVXNpbmcgQWxsQ2xhc3MgVFMiKQ0KCWVuZA0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIE9yYlJlc2V0KCkNCglpZiBNTUFMb2FkZWQgdGhlbg0KCQlfRy5NTUFfUmVzZXRBdXRvQXR0YWNrKCkNCgllbHNlaWYgU3hPcmJMb2FkZWQgdGhlbg0KCQlTeE86UmVzZXRBQSgpDQoJZW5kDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gT3JiVGFyZ2V0KHJhbmNlKQ0KCWxvY2FsIFQNCglpZiBNTUFMb2FkIHRoZW4gVCA9IF9HLk1NQV9UYXJnZXQgZW5kDQoJaWYgUmVib3JuTG9hZCB0aGVuIFQgPSBfRy5BdXRvQ2FycnkuQ3Jvc3NoYWlyLkF0dGFja19Dcm9zc2hhaXIudGFyZ2V0IGVuZA0KCWlmIFJldmFtcGVkTG9hZGVkIHRoZW4gVCA9IF9HLkF1dG9DYXJyeS5PcmJ3YWxrZXIudGFyZ2V0IGVuZA0KCWlmIFN4T0xvYWQgdGhlbiBUID0gU3hPOkdldFRhcmdldCgpIGVuZA0KCWlmIFQgPT0gbmlsIHRoZW4gDQoJCVQgPSBTVFM6R2V0VGFyZ2V0KHJhbmNlKQ0KCWVuZA0KCWlmIFQgYW5kIFQudHlwZSA9PSBwbGF5ZXIudHlwZSBhbmQgVmFsaWRUYXJnZXQoVCwgcmFuY2UpIHRoZW4NCgkJcmV0dXJuIFQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBzZXR0aW5nKCkNCg0KCWlmIG5vdCBUd2lzdGVkVHJlZWxpbmUgdGhlbg0KCQlKdW5nbGVNb2JOYW1lcyA9IHsNCgkJCVsiU1JVX0tydWdNaW5pNS4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfUmVkTWluaTQuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZE1pbmk0LjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pMy4xLjIiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pMy4xLjMiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pMy4xLjQiXQk9IHRydWUsDQoJCQlbIlNSVV9NdXJrd29sZk1pbmkyLjEuMiJdCT0gdHJ1ZSwNCgkJCVsiU1JVX011cmt3b2xmTWluaTIuMS4zIl0JPSB0cnVlLA0KCQkJWyJTUlVfQmx1ZU1pbmkxLjEuMiJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlTWluaTIxLjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlTWluaTcuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX0JsdWVNaW5pMjcuMS4zIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX011cmt3b2xrTWluaTguMS4yIl0JPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGtNaW5pOC4xLjMiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pOS4xLjIiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pOS4xLjMiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pOS4xLjQiXQk9IHRydWUsDQoJCQlbIlNSVV9SZWRNaW5pMTAuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZE1pbmkxMC4xLjMiXQkJPSB0cnVlLA0KCQkJWyJTUlVfS3J1Z01pbmkxMS4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfQmFyb24xMi4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0RyYWdvbjYuMS4xIl0JCQk9IHRydWUsDQoJCX0NCg0KCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQkJWyJTUlVfS3J1ZzUuMS4yIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9SZWQ0LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrMy4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGYyLjEuMSJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlMS4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0dyb21wMTMuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9Hcm9tcDE0LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfQmx1ZTcuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9NdXJrd29sazguMS4xIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVhazkuMS4xIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZDEwLjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfS3J1ZzExLjEuMiJdCQkJPSB0cnVlLA0KCQl9DQoJZWxzZQ0KCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQl9DQoJCUp1bmdsZU1vYk5hbWVzID0gew0KCQl9DQoJZW5kDQoNCglmb3IgaSA9IDAsIG9iak1hbmFnZXIubWF4T2JqZWN0cyBkbw0KCQlsb2NhbCBvYmplY3QgPSBvYmpNYW5hZ2VyOmdldE9iamVjdChpKQ0KCQlpZiBvYmplY3QgYW5kIG9iamVjdC52YWxpZCBhbmQgbm90IG9iamVjdC5kZWFkIHRoZW4NCgkJCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqZWN0Lm5hbWVdIHRoZW4NCgkJCQlKdW5nbGVGb2N1c01vYnNbI0p1bmdsZUZvY3VzTW9icysxXSA9IG9iamVjdA0KCQkJZWxzZWlmIEp1bmdsZU1vYk5hbWVzW29iamVjdC5uYW1lXSB0aGVuDQoJCQkJSnVuZ2xlTW9ic1sjSnVuZ2xlTW9icysxXSA9IG9iamVjdA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEp1bmdsZU1vYihyYW5jZSkNCglmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZUZvY3VzTW9icykgZG8NCgkJaWYgVmFsaWRUYXJnZXQoTW9iLCByYW5jZSkgdGhlbiByZXR1cm4gTW9iIGVuZA0KCWVuZA0KCWZvciBfLCBNb2IgaW4gcGFpcnMoSnVuZ2xlTW9icykgZG8NCgkJaWYgVmFsaWRUYXJnZXQoTW9iLCByYW5jZSkgdGhlbiByZXR1cm4gTW9iIGVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEhQQmFyUG9zKGVuZW15KQ0KCWVuZW15LmJhckRhdGEgPSB7UGVyY2VudGFnZU9mZnNldCA9IHt4ID0gLTAuMDUsIHkgPSAwfX0tLUdldEVuZW15QmFyRGF0YSgpDQoJbG9jYWwgYmFyUG9zID0gR2V0VW5pdEhQQmFyUG9zKGVuZW15KQ0KCWxvY2FsIGJhclBvc09mZnNldCA9IEdldFVuaXRIUEJhck9mZnNldChlbmVteSkNCglsb2NhbCBiYXJPZmZzZXQgPSB7IHggPSBlbmVteS5iYXJEYXRhLlBlcmNlbnRhZ2VPZmZzZXQueCwgeSA9IGVuZW15LmJhckRhdGEuUGVyY2VudGFnZU9mZnNldC55IH0NCglsb2NhbCBiYXJQb3NQZXJjZW50YWdlT2Zmc2V0ID0geyB4ID0gZW5lbXkuYmFyRGF0YS5QZXJjZW50YWdlT2Zmc2V0LngsIHkgPSBlbmVteS5iYXJEYXRhLlBlcmNlbnRhZ2VPZmZzZXQueSB9DQoJbG9jYWwgQmFyUG9zT2Zmc2V0WCA9IDE3MQ0KCWxvY2FsIEJhclBvc09mZnNldFkgPSA0Ng0KCWxvY2FsIENvcnJlY3Rpb25ZID0gMzkNCglsb2NhbCBTdGFydEhwUG9zID0gMzENCg0KCWJhclBvcy54ID0gbWF0aC5mbG9vcihiYXJQb3MueCArIChiYXJQb3NPZmZzZXQueCAtIDAuNSArIGJhclBvc1BlcmNlbnRhZ2VPZmZzZXQueCkgKiBCYXJQb3NPZmZzZXRYICsgU3RhcnRIcFBvcykNCgliYXJQb3MueSA9IG1hdGguZmxvb3IoYmFyUG9zLnkgKyAoYmFyUG9zT2Zmc2V0LnkgLSAwLjUgKyBiYXJQb3NQZXJjZW50YWdlT2Zmc2V0LnkpICogQmFyUG9zT2Zmc2V0WSArIENvcnJlY3Rpb25ZKQ0KDQoJbG9jYWwgU3RhcnRQb3MgPSBWZWN0b3IoYmFyUG9zLnggLCBiYXJQb3MueSwgMCkNCglsb2NhbCBFbmRQb3MgPSAgVmVjdG9yKGJhclBvcy54ICsgMTA4ICwgYmFyUG9zLnkgLCAwKQ0KCXJldHVybiBWZWN0b3IoU3RhcnRQb3MueCwgU3RhcnRQb3MueSwgMCksIFZlY3RvcihFbmRQb3MueCwgRW5kUG9zLnksIDApDQplbmQNCg0KDQpmdW5jdGlvbiBPbkxvYWQoKQ0KCUF1dG91cGRhdGVyTXNnKCJMT0FEIik7DQoJDQoJT3JiTG9hZCgpDQoJU1RTID0gU2ltcGxlVFMoKQ0KCWRwID0gRGl2aW5lUHJlZCgpIA0KCQ0KCU9uTG9hZE1lbnUoKQ0KCQ0KCWlmIEdldEdhbWUoKS5tYXAuc2hvcnROYW1lID09ICJ0d2lzdGVkVHJlZWxpbmUiIHRoZW4NCgkJVHdpc3RlZFRyZWVsaW5lID0gdHJ1ZQ0KCWVsc2UNCgkJVHdpc3RlZFRyZWVsaW5lID0gZmFsc2UNCgllbmQNCglmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbw0KICAgICAgICBsb2NhbCBoZXJvID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KCQlmb3IgXywgY2hhbXAgaW4gcGFpcnMoSW50ZXJydXB0TGlzdCkgZG8NCgkJCWlmIGhlcm8uY2hhck5hbWUgPT0gY2hhbXAuY2hhck5hbWUgdGhlbg0KCQkJCXRhYmxlLmluc2VydChUb0ludGVycnVwdCwgY2hhbXAuc3BlbGxOYW1lKQ0KCQkJZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uRHJhdygpDQoJaWYgQ29uZmlnLkRyYXcuRHJhd1EgdGhlbg0KCQlEcmF3Q2lyY2xlKHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLnosIFEuUmFuY2UsIFRBUkdCKENvbmZpZy5EcmF3LkRyYXdRQ29sb3IpKQ0KCWVuZA0KCWlmIENvbmZpZy5EcmF3LkRyYXdXIHRoZW4NCgkJRHJhd0NpcmNsZShwbGF5ZXIueCwgcGxheWVyLnksIHBsYXllci56LCBXLlJhbmNlLCBUQVJHQihDb25maWcuRHJhdy5EcmF3V0NvbG9yKSkNCgllbmQNCglpZiBDb25maWcuRHJhdy5EcmF3RSB0aGVuDQoJCURyYXdDaXJjbGUocGxheWVyLngsIHBsYXllci55LCBwbGF5ZXIueiwgRS5NYXhSYW5jZSwgVEFSR0IoQ29uZmlnLkRyYXcuRHJhd0VDb2xvcikpDQoJZW5kDQoJaWYgQ29uZmlnLkRyYXcuRHJhd1IgdGhlbg0KCQlEcmF3Q2lyY2xlKHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLnosIFIuUmFuY2UsIFRBUkdCKENvbmZpZy5EcmF3LkRyYXdSQ29sb3IpKQ0KCWVuZA0KCWZvciBpLCBqIGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlpZiBHZXREaXN0YW5jZShqKSA8IDIwMDAgYW5kIG5vdCBqLmRlYWQgYW5kIENvbmZpZy5BZHMuZG0gdGhlbg0KCQkJbG9jYWwgcG9zID0gR2V0SFBCYXJQb3MoaikNCgkJCWxvY2FsIGRtZyA9IEdldFNwZWxsRG1nKGopDQoNCgkJCWxvY2FsIHBvczIgPSAoKGouaGVhbHRoIC0gZG1nKS9qLm1heEhlYWx0aCkqMTAwDQoJCQlEcmF3TGluZShwb3MueCtwb3MyLCBwb3MueSwgcG9zLngrcG9zMiwgcG9zLnktMzAsIDEsIDB4ZmZmZjAwMDApDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldFNwZWxsRG1nKGVuZW15KQ0KCWxvY2FsIGNvbWJvZG1nDQoJbG9jYWwgUWRtZyA9IGdldERtZygiUSIsIGVuZW15LCBwbGF5ZXIpDQoJbG9jYWwgRWRtZyA9IGdldERtZygiRSIsIGVuZW15LCBwbGF5ZXIpDQoJbG9jYWwgUmRtZyA9IGdldERtZygiUiIsIGVuZW15LCBwbGF5ZXIpDQoJDQoJY29tYm9kbWcgPSBRZG1nK0VkbWcrUmRtZw0KCXJldHVybiBjb21ib2RtZw0KZW5kDQoNCmZ1bmN0aW9uIE9uTG9hZE1lbnUoKQ0KCQ0KCUNvbmZpZyA9IHNjcmlwdENvbmZpZygiWW91ciBWaWN0b3IiLCAiWW91ciBWaWN0b3IiKTsNCgkJQ29uZmlnOmFkZFN1Yk1lbnUoIkhvdEtleSIsICJIb3RLZXkiKQ0KCQkJQ29uZmlnLkhvdEtleTphZGRQYXJhbSgiQ29tYm8iLCAiQ29tYm8gQWN0aXZlIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKTsNCgkJCUNvbmZpZy5Ib3RLZXk6YWRkUGFyYW0oIkhhcmFzcyIsICJIYXJhc3MgQWN0aXZlIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQoJCQlDb25maWcuSG90S2V5OmFkZFBhcmFtKCJDbGVhciIsICJMaW5lIENsZWFyIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQoJCQlDb25maWcuSG90S2V5OmFkZFBhcmFtKCJEZWJ1ZyIsICJEZWJ1ZyIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiRyIpKQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJDb21ibyIsICJDb21ibyIpDQoJCQlDb25maWcuQ29tYm86YWRkUGFyYW0oIlVzZVEiLCAiVXNlIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuQ29tYm86YWRkUGFyYW0oIlVzZVciLCAiVXNlIFciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuQ29tYm86YWRkUGFyYW0oIlVzZUUiLCAiVXNlIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQktLUNvbmZpZy5Db21ibzphZGRQYXJhbSgiVXNlUiIsICJVc2UgUiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiSGFyYXNzIiwgIkhhcmFzcyIpDQoJCQlDb25maWcuSGFyYXNzOmFkZFBhcmFtKCJVc2VRIiwgIlVzZSBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJQ29uZmlnLkhhcmFzczphZGRQYXJhbSgiVXNlRSIsICJVc2UgRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5IYXJhc3M6YWRkUGFyYW0oIk1hbmEiLCAiTWFuYU1hbmFnZXIiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwLCAwLCAxMDAsIDApDQoJCQkNCgkJQ29uZmlnOmFkZFN1Yk1lbnUoIkNsZWFyIiwgIkNsZWFyIikNCgkJCUNvbmZpZy5DbGVhcjphZGRQYXJhbSgiVXNlUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5DbGVhcjphZGRQYXJhbSgiVXNlRSIsICJVc2UgRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiUVNldHRpbmciLCAiUVNldHRpbmciKQ0KCQkJQ29uZmlnLlFTZXR0aW5nOmFkZFBhcmFtKCJLaWxsU3RlYWwiLCAiS2lsbFN0ZWFsIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJXU2V0dGluZyIsICJXU2V0dGluZyIpDQoJCQktLUNvbmZpZy5XU2V0dGluZzphZGRQYXJhbSgiS2lsbFN0ZWFsIiwgIktpbGxTdGVhbCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5XU2V0dGluZzphZGRQYXJhbSgiaW50ZXJydXB0IiwgImludGVycnVwdCBPbiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiRVNldHRpbmciLCAiRVNldHRpbmciKQ0KCQkJQ29uZmlnLkVTZXR0aW5nOmFkZFBhcmFtKCJLaWxsU3RlYWwiLCAiS2lsbFN0ZWFsIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJSU2V0dGluZyIsICJSU2V0dGluZyIpDQoJCQlDb25maWcuUlNldHRpbmc6YWRkUGFyYW0oIktpbGxTdGVhbCIsICJLaWxsU3RlYWwiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuUlNldHRpbmc6YWRkUGFyYW0oImludGVycnVwdCIsICJpbnRlcnJ1cHQgT24iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiQWRzIiwgIkFkcyIpDQoJCQlDb25maWcuQWRzOmFkZFBhcmFtKCJQcmlvcml0eSIsICJpbnRlcnJ1cHQgUHJpb3JpdHkiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJXLVIiLCAiUi1XIn0pDQoJCQlDb25maWcuQWRzOmFkZFBhcmFtKCJkbSIsICJEYW1hZ2VNYW5hZ2VyIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJEcmF3IiwgIkRyYXciKQ0KCQkJQ29uZmlnLkRyYXc6YWRkUGFyYW0oIkRyYXdRIiwgIkRyYXcgUSBSYW5jZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5EcmF3OmFkZFBhcmFtKCJEcmF3UUNvbG9yIiwgIkRyYXcgUSBDb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezEwMCwgMjU1LCAwLCAwfSkNCgkJCUNvbmZpZy5EcmF3OmFkZFBhcmFtKCJEcmF3VyIsICJEcmF3IFcgUmFuY2UiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuRHJhdzphZGRQYXJhbSgiRHJhd1dDb2xvciIsICJEcmF3IFcgQ29sb3IiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsIHsxMDAsIDI1NSwgMCwgMH0pDQoJCQlDb25maWcuRHJhdzphZGRQYXJhbSgiRHJhd0UiLCAiRHJhdyBFIFJhbmNlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJQ29uZmlnLkRyYXc6YWRkUGFyYW0oIkRyYXdFQ29sb3IiLCAiRHJhdyBFIENvbG9yIiwgU0NSSVBUX1BBUkFNX0NPTE9SLCB7MTAwLCAyNTUsIDAsIDB9KQ0KCQkJQ29uZmlnLkRyYXc6YWRkUGFyYW0oIkRyYXdSIiwgIkRyYXcgUiBSYW5jZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5EcmF3OmFkZFBhcmFtKCJEcmF3UkNvbG9yIiwgIkRyYXcgUiBDb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezEwMCwgMjU1LCAwLCAwfSkNCgkJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiT3JiV2FsayIsICJPcmJXYWxrIikNCgkJaWYgU3hPTG9hZGVkIHRoZW4NCgkJCVN4TzpMb2FkVG9NZW51KENvbmZpZy5PcmJXYWxrKQ0KCQllbHNlaWYgTU1BTG9hZGVkIHRoZW4NCgkJCUNvbmZpZy5PcmJXYWxrOmFkZFBhcmFtKCJyIiwiTU1BIFJvYWQiLCBTQ1JJUFRfUEFSQU1fSU5GTykNCgkJZWxzZQ0KCQkJQ29uZmlnLk9yYldhbGs6YWRkUGFyYW0oInIiLCJTQUMgTG9hZCIsIFNDUklQVF9QQVJBTV9JTkZPKQ0KCQllbmQNCmVuZA0KDQpmdW5jdGlvbiBPblRpY2soKQ0KCWlmIENvbmZpZy5Ib3RLZXkuQ29tYm8gdGhlbg0KCQlDb21ibygpDQoJZW5kDQoJaWYgQ29uZmlnLkhvdEtleS5IYXJhc3MgdGhlbg0KCQlIYXJhc3MoKQ0KCWVuZA0KCWlmIENvbmZpZy5Ib3RLZXkuQ2xlYXIgdGhlbg0KCQlDbGVhcigpDQoJZW5kDQoJaWYgQ29uZmlnLkhvdEtleS5EZWJ1ZyB0aGVuDQoJCURlYnVnKCkNCgllbmQNCglraWxsc3RlYWwoKQ0KZW5kDQoNCmZ1bmN0aW9uIERlYnVnKCkNCglsb2NhbCBUYXJnZXQgPSBPcmJUYXJnZXQoMTUwMCkNCglpZiBUYXJnZXQgfj0gbmlsIHRoZW4NCgkJcGVyZmVjdEUoVGFyZ2V0KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENvbWJvKCkNCglsb2NhbCBUYXJnZXQgPSBPcmJUYXJnZXQoMTUwMCkNCglpZiBUYXJnZXQgfj0gbmlsIHRoZW4NCgkJaWYgQ29uZmlnLkNvbWJvLlVzZVEgdGhlbg0KCQkJQ2FzdFEoVGFyZ2V0KQ0KCQllbmQNCgkJaWYgQ29uZmlnLkNvbWJvLlVzZVcgdGhlbg0KCQkJQ2FzdFcoVGFyZ2V0KQ0KCQllbmQNCgkJaWYgQ29uZmlnLkNvbWJvLlVzZUUgdGhlbg0KCQkJQ2FzdEUoVGFyZ2V0KQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIYXJhc3MoKQ0KCWxvY2FsIFRhcmdldCA9IE9yYlRhcmdldCgxNTAwKQ0KCWlmIFRhcmdldCB+PSBuaWwgYW5kIG15SGVyby5tYW5hID4gKG15SGVyby5tYXhNYW5hKihDb25maWcuSGFyYXNzLk1hbmEqMC4wMSkpIHRoZW4NCgkJaWYgQ29uZmlnLkhhcmFzcy5Vc2VRIGFuZCBRLklzUmVhZHkoKSB0aGVuDQoJCQlDYXN0UShUYXJnZXQpDQoJCWVuZA0KCQlpZiBDb25maWcuSGFyYXNzLlVzZUUgYW5kIEUuSXNSZWFkeSgpIHRoZW4NCgkJCUNhc3RFKFRhcmdldCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQ2xlYXIoKQ0KCXNldHRpbmcoKQ0KCWxvY2FsIHQgPSBHZXRKdW5nbGVNb2IoMTUwMCkNCglpZiB0IH49IG5pbCB0aGVuDQoJCWlmIG5vdCB0LmRlYWQgYW5kIFEuSXNSZWFkeSgpIGFuZCBDb25maWcuQ2xlYXIuVXNlUSB0aGVuDQoJCQlDYXN0USh0KQ0KCQllbmQNCgkJaWYgbm90IHQuZGVhZCBhbmQgRS5Jc1JlYWR5KCkgYW5kIENvbmZpZy5DbGVhci5Vc2VFIHRoZW4NCgkJCUNhc3RFKHQpDQoJCWVuZA0KCWVsc2UNCgkJRW5lbXlNaW5pb25zOnVwZGF0ZSgpDQoJCWZvciBpLCBtaW5pb24gaW4gcGFpcnMoRW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQoJCQlpZiBDb25maWcuQ2xlYXIuVXNlRSBhbmQgRS5Jc1JlYWR5KCkgdGhlbg0KCQkJaWYgbWluaW9uIH49IG5pbCBhbmQgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgIG1pbmlvbi5kZWFkID09IGZhbHNlIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDwgRS5NaW5SYW5jZSB0aGVuDQoJCQkJbG9jYWwgQmVzdFBvcywgYmVzdGhpdCA9IEdldEJlc3RMaW5lRmFybVBvc2l0aW9uKEUuTWluUmFuY2UsIDc1LCBFbmVteU1pbmlvbnMub2JqZWN0cykNCgkJCQlpZiBCZXN0UG9zIH49IG5pbCBhbmQgbm90IG1pbmlvbi5kZWFkIHRoZW4NCgkJCQkJQ2FzdEUoQmVzdFBvcykNCgkJCQllbmQNCgkJCWVuZA0KCQkJZW5kDQoJCQlpZiBDb25maWcuQ2xlYXIuVXNlUSBhbmQgUS5Jc1JlYWR5KCkgdGhlbg0KCQkJaWYgbWluaW9uIH49IG5pbCBhbmQgbWluaW9uLmRlYWQgPT0gZmFsc2UgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPCBRLlJhbmNlIHRoZW4NCgkJCQlDYXN0UShtaW5pb24pDQoJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBraWxsc3RlYWwoKQ0KCWZvciBpLCB0IGluIHBhaXJzKGVuZW15SGVyb2VzKSBkbw0KCQlpZiBWYWxpZFRhcmdldCh0KSBhbmQgQ29uZmlnLlFTZXR0aW5nLktpbGxTdGVhbCBhbmQgR2V0RGlzdGFuY2UodCwgcGxheWVyKSA8IFEuUmFuY2UgYW5kIFEuRGFtYWdlKHQpID4gdC5oZWFsdGggYW5kIFEuSXNSZWFkeSgpIHRoZW4NCgkJCUNhc3RRKHQpDQoJCWVuZA0KCQlpZiBWYWxpZFRhcmdldCh0KSBhbmQgQ29uZmlnLkVTZXR0aW5nLktpbGxTdGVhbCBhbmQgR2V0RGlzdGFuY2UodCwgcGxheWVyKSA8IEUuTWF4UmFuY2UgYW5kIEUuRGFtYWdlKHQpID4gdC5oZWFsdGggYW5kIEUuSXNSZWFkeSgpIHRoZW4NCgkJCXBlcmZlY3RFKHQpDQoJCWVuZA0KCQlpZiBWYWxpZFRhcmdldCh0KSBhbmQgQ29uZmlnLlJTZXR0aW5nLktpbGxTdGVhbCBhbmQgR2V0RGlzdGFuY2UodCwgcGxheWVyKSA8IFIuUmFuY2UgYW5kIFIuRGFtYWdlKHQpID4gdC5oZWFsdGggYW5kIFIuSXNSZWFkeSgpIHRoZW4NCgkJCUNhc3RSKHQpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RRKFQpDQoJaWYgUS5Jc1JlYWR5KCkgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShULCBwbGF5ZXIpIDwgUS5SYW5jZSB0aGVuDQoJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX1EsIHRhcmdldE5ldHdvcmtJZCA9IFQubmV0d29ya0lEfSk6c2VuZCgpDQoJCQlPcmJSZXNldCgpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RXKFQpDQoJaWYgVy5Jc1JlYWR5KCkgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShULCBwbGF5ZXIpIDwgVy5SYW5jZSB0aGVuDQoJCQlsb2NhbCB0YXJnZXQgPSBEUFRhcmdldChUKQ0KCQkJbG9jYWwgc3RhdGUsaGl0UG9zLHBlcmMgPSBkcDpwcmVkaWN0KHRhcmdldCxDaXJjbGVTUyhtYXRoLmh1Z2UsVy5SYW5jZSwyNTAsMjAwLG1hdGguaHVnZSkpDQoNCgkJCWlmIHN0YXRlPT1Ta2lsbFNob3QuU1RBVFVTLlNVQ0NFU1NfSElUIHRoZW4NCgkJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX1csIHRvWCA9IGhpdFBvcy54LCB0b1kgPSBoaXRQb3MueiwgZnJvbVggPSBoaXRQb3MueCwgZnJvbVkgPSBoaXRQb3Muen0pOnNlbmQoKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RFKFQpDQoJaWYgRS5Jc1JlYWR5KCkgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShULCBwbGF5ZXIpIDwgRS5NYXhSYW5jZSB0aGVuDQoJCQlsb2NhbCB0ciA9IEdldERpc3RhbmNlKG15SGVybyxUKQ0KDQoJCQlpZiB0cgk8PQlFLk1pblJhbmNlIHRoZW4NCgkJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX0UsIHRvWCA9IFQueCwgdG9ZID0gVC56LCBmcm9tWCA9IFQueCwgZnJvbVkgPSBULnp9KTpzZW5kKCkNCgkJCWVsc2VpZiB0cj5FLk1pblJhbmNlIGFuZCB0cjwgRS5NYXhSYW5jZSB0aGVuDQoJCQkJbG9jYWwgdGFyZ2V0ID0gRFBUYXJnZXQoVCkNCgkJCQlsb2NhbCBjYXN0UG9zWCA9IChFLk1pblJhbmNlKlQueCsodHIgLSBFLk1pblJhbmNlKSpteUhlcm8ueCkvdHINCgkJCQlsb2NhbCBjYXN0UG9zWiA9IChFLk1pblJhbmNlKlQueisodHIgLSBFLk1pblJhbmNlKSpteUhlcm8ueikvdHINCgkJCQlsb2NhbCBzdGF0ZSxoaXRQb3MscGVyYyA9IGRwOnByZWRpY3QodGFyZ2V0LHZpa3RvckUsMixWZWN0b3IoY2FzdFBvc1gsMCxjYXN0UG9zWikpDQoJCQkJaWYgc3RhdGUgPT0gU2tpbGxTaG90LlNUQVRVUy5TVUNDRVNTX0hJVCB0aGVuDQoJCQkJCWlmIEdldERpc3RhbmNlKG15SGVybyxoaXRQb3MpID4gRS5NaW5SYW5jZSB0aGVuCQkJCQkNCgkJCQkJCWxvY2FsIGRpc3QyID0gR2V0RGlzdGFuY2UobXlIZXJvLGhpdFBvcykNCgkJCQkJCWxvY2FsIGhpdFBvc1ggPSAoRS5NaW5SYW5jZSpoaXRQb3MueCsoZGlzdDIgLSBFLk1pblJhbmNlKSpteUhlcm8ueCkvZGlzdDINCgkJCQkJCWxvY2FsIGhpdFBvc1ogPSAoRS5NaW5SYW5jZSpoaXRQb3MueisoZGlzdDIgLSBFLk1pblJhbmNlKSpteUhlcm8ueikvZGlzdDINCgkJCQkJCVBhY2tldCgiU19DQVNUIiwge3NwZWxsSWQgPSBfRSwgdG9YID0gaGl0UG9zWCwgdG9ZID0gaGl0UG9zWiwgZnJvbVggPSBoaXRQb3NYLCBmcm9tWSA9IGhpdFBvc1p9KTpzZW5kKCkNCgkJCQkJZWxzZQ0KCQkJCQkJUGFja2V0KCJTX0NBU1QiLCB7c3BlbGxJZCA9IF9FLCB0b1ggPSBoaXRQb3MueCwgdG9ZID0gaGl0UG9zLnosIGZyb21YID0gaGl0UG9zLngsIGZyb21ZID0gaGl0UG9zLnp9KTpzZW5kKCkNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gcGVyZmVjdEUoVCkNCglpZiBFLklzUmVhZHkoKSB0aGVuDQoJCWlmIEdldERpc3RhbmNlKFQsIHBsYXllcikgPCBFLk1heFJhbmNlIHRoZW4NCgkJCWxvY2FsIHRyID0gR2V0RGlzdGFuY2UobXlIZXJvLFQpDQoNCgkJCWlmIHRyCTw9CUUuTWluUmFuY2UgdGhlbg0KCQkJCWxvY2FsIGJlaGluZCA9IGJlaGluZChteUhlcm8sIFQpDQoJCQkJUGFja2V0KCJTX0NBU1QiLCB7c3BlbGxJZCA9IF9FLCB0b1ggPSBULngsIHRvWSA9IFQueiwgZnJvbVggPSBiZWhpbmQueCwgZnJvbVkgPSBiZWhpbmQuen0pOnNlbmQoKQ0KCQkJZWxzZWlmIHRyPkUuTWluUmFuY2UgYW5kIHRyPCBFLk1heFJhbmNlIHRoZW4NCgkJCQlsb2NhbCB0YXJnZXQgPSBEUFRhcmdldChUKQ0KCQkJCWxvY2FsIGNhc3RQb3NYID0gKEUuTWluUmFuY2UqVC54Kyh0ciAtIEUuTWluUmFuY2UpKm15SGVyby54KS90cg0KCQkJCWxvY2FsIGNhc3RQb3NaID0gKEUuTWluUmFuY2UqVC56Kyh0ciAtIEUuTWluUmFuY2UpKm15SGVyby56KS90cg0KCQkJCWxvY2FsIHN0YXRlLGhpdFBvcyxwZXJjID0gZHA6cHJlZGljdCh0YXJnZXQsdmlrdG9yRSwyLFZlY3RvcihjYXN0UG9zWCwwLGNhc3RQb3NaKSkNCgkJCQlpZiBzdGF0ZSA9PSBTa2lsbFNob3QuU1RBVFVTLlNVQ0NFU1NfSElUIHRoZW4NCgkJCQkJaWYgR2V0RGlzdGFuY2UobXlIZXJvLGhpdFBvcykgPiBFLk1pblJhbmNlIHRoZW4JCQkJCQ0KCQkJCQkJbG9jYWwgZGlzdDIgPSBHZXREaXN0YW5jZShteUhlcm8saGl0UG9zKQ0KCQkJCQkJbG9jYWwgaGl0UG9zWCA9IChFLk1pblJhbmNlKmhpdFBvcy54KyhkaXN0MiAtIEUuTWluUmFuY2UpKm15SGVyby54KS9kaXN0Mg0KCQkJCQkJbG9jYWwgaGl0UG9zWiA9IChFLk1pblJhbmNlKmhpdFBvcy56KyhkaXN0MiAtIEUuTWluUmFuY2UpKm15SGVyby56KS9kaXN0Mg0KCQkJCQkJbG9jYWwgYmVoaW5kID0gYmVoaW5kKG15SGVybywgVCkNCgkJCQkJCVBhY2tldCgiU19DQVNUIiwge3NwZWxsSWQgPSBfRSwgdG9YID0gaGl0UG9zWCwgdG9ZID0gaGl0UG9zWiwgZnJvbVggPSBiZWhpbmQueCwgZnJvbVkgPSBiZWhpbmQuen0pOnNlbmQoKQ0KCQkJCQllbHNlDQoJCQkJCQlsb2NhbCBiZWhpbmQgPSBiZWhpbmQobXlIZXJvLCBUKQ0KCQkJCQkJUGFja2V0KCJTX0NBU1QiLCB7c3BlbGxJZCA9IF9FLCB0b1ggPSBoaXRQb3MueCwgdG9ZID0gaGl0UG9zLnosIGZyb21YID0gYmVoaW5kLngsIGZyb21ZID0gYmVoaW5kLnp9KTpzZW5kKCkNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBDYXN0UihUKQ0KCWlmIFIuSXNSZWFkeSgpIHRoZW4NCgkJaWYgR2V0RGlzdGFuY2UoVCwgcGxheWVyKSA8IFIuUmFuY2UgdGhlbg0KCQkJUGFja2V0KCJTX0NBU1QiLCB7c3BlbGxJZCA9IF9SLCB0b1ggPSBULngsIHRvWSA9IFQueiwgZnJvbVggPSBULngsIGZyb21ZID0gVC56fSk6c2VuZCgpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uUHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KCWlmICNUb0ludGVycnVwdCA+IDAgdGhlbg0KCQlmb3IgXywgYWJpbGl0eSBpbiBwYWlycyhUb0ludGVycnVwdCkgZG8NCgkJCWlmIHNwZWxsLm5hbWUgPT0gYWJpbGl0eSBhbmQgdW5pdC50ZWFtIH49IHBsYXllci50ZWFtIHRoZW4NCgkJCQlpZiBDb25maWcuQWRzLlByaW9yaXR5ID09IDEgdGhlbg0KCQkJCQlpZiBDb25maWcuV1NldHRpbmcuaW50ZXJydXB0IGFuZCBXLklzUmVhZHkoKSBhbmQgR2V0RGlzdGFuY2UodW5pdCwgcGxheWVyKSA8IFcuUmFuY2UgdGhlbg0KCQkJCQkJQ2FzdFcodW5pdCkNCgkJCQkJZW5kDQoJCQkJCWlmICBDb25maWcuUlNldHRpbmcuaW50ZXJydXB0IGFuZCBSLklzUmVhZHkoKSBhbmQgUi5Jc1JlYWR5KCkgPT0gZmFsc2UgYW5kIEdldERpc3RhbmNlKHVuaXQsIHBsYXllcikgPCBSLlJhbmNlIHRoZW4NCgkJCQkJCUNhc3RSKHVuaXQpDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBDb25maWcuQWRzLlByaW9yaXR5ID09IDIgdGhlbg0KCQkJCQlpZiAgQ29uZmlnLlJTZXR0aW5nLmludGVycnVwdCBhbmQgUi5Jc1JlYWR5KCkgYW5kIEdldERpc3RhbmNlKHVuaXQsIHBsYXllcikgPCBSLlJhbmNlIHRoZW4NCgkJCQkJCUNhc3RSKHVuaXQpDQoJCQkJCWVuZA0KCQkJCQlpZiBDb25maWcuV1NldHRpbmcuaW50ZXJydXB0IGFuZCBXLklzUmVhZHkoKSBhbmQgVy5Jc1JlYWR5KCkgPT0gZmFsc2UgYW5kIEdldERpc3RhbmNlKHVuaXQsIHBsYXllcikgPCBXLlJhbmNlIHRoZW4NCgkJCQkJCUNhc3RXKHVuaXQpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEJlc3RMaW5lRmFybVBvc2l0aW9uKHJhbmdlLCB3aWR0aCwgb2JqZWN0cykNCiAgICBsb2NhbCBCZXN0UG9zIA0KICAgIGxvY2FsIEJlc3RIaXQgPSAwDQogICAgZm9yIGksIG9iamVjdCBpbiBpcGFpcnMob2JqZWN0cykgZG8NCiAgICAgICAgbG9jYWwgRW5kUG9zID0gVmVjdG9yKG15SGVybykgKyByYW5nZSAqIChWZWN0b3Iob2JqZWN0KSAtIFZlY3RvcihteUhlcm8pKTpub3JtYWxpemVkKCkNCiAgICAgICAgbG9jYWwgaGl0ID0gQ291bnRPYmplY3RzT25MaW5lU2VnbWVudChteUhlcm8sIEVuZFBvcywgd2lkdGgsIG9iamVjdHMpDQogICAgICAgIGlmIGhpdCA+IEJlc3RIaXQgdGhlbg0KICAgICAgICAgICAgQmVzdEhpdCA9IGhpdA0KICAgICAgICAgICAgQmVzdFBvcyA9IG9iamVjdA0KICAgICAgICAgICAgaWYgQmVzdEhpdCA9PSAjb2JqZWN0cyB0aGVuDQogICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gQmVzdFBvcywgQmVzdEhpdA0KZW5kDQoNCmZ1bmN0aW9uIENvdW50T2JqZWN0c09uTGluZVNlZ21lbnQoU3RhcnRQb3MsIEVuZFBvcywgd2lkdGgsIG9iamVjdHMpDQogICAgbG9jYWwgbiA9IDANCiAgICBmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbw0KICAgICAgICBsb2NhbCBwb2ludFNlZ21lbnQsIHBvaW50TGluZSwgaXNPblNlZ21lbnQgPSBWZWN0b3JQb2ludFByb2plY3Rpb25PbkxpbmVTZWdtZW50KFN0YXJ0UG9zLCBFbmRQb3MsIG9iamVjdCkNCiAgICAgICAgaWYgaXNPblNlZ21lbnQgYW5kIEdldERpc3RhbmNlU3FyKHBvaW50U2VnbWVudCwgb2JqZWN0KSA8IHdpZHRoICogd2lkdGggYW5kIEdldERpc3RhbmNlU3FyKFN0YXJ0UG9zLCBFbmRQb3MpID4gR2V0RGlzdGFuY2VTcXIoU3RhcnRQb3MsIG9iamVjdCkgdGhlbg0KICAgICAgICAgICAgbiA9IG4gKyAxDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiBuDQplbmQNCg0KZnVuY3Rpb24gYmVoaW5kKHVuaXQsIHRhcmdldCkNCglyZXR1cm4gdGFyZ2V0ICsgVmVjdG9yKHVuaXQueC10YXJnZXQueCx1bml0LnksdW5pdC56LXRhcmdldC56KTpub3JtYWxpemVkKCkqKEdldERpc3RhbmNlKHVuaXQsdGFyZ2V0KSsxMDApDQplbmQ="), nil, "bt", _ENV))()