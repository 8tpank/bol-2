
assert(load(Base64Decode("aWYgbm90IFZJUF9VU0VSIGFuZCBteUhlcm8uY2hhck5hbWUgfj0gIlZpa3RvciIgdGhlbiByZXR1cm4gZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIEF1dG91cGRhdGVyTXNnKG1zZykgcHJpbnQoIjxmb250IGNvbG9yPVwiIzY2OTlmZlwiPjxiPllvdXIgVmlrdG9yOjwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiIuLm1zZy4uIi48L2ZvbnQ+IikgZW5kDQoNCg0KLS1BdXRvdXBkYXRlck1zZygiV2VsbENvbWUgIi4uSUQpDQoNCg0KbG9jYWwgdmVyc2lvbiA9IDEuMDENCmxvY2FsIEFVVE9fVVBEQVRFID0gdHJ1ZQ0KbG9jYWwgVVBEQVRFX0hPU1QgPSAicmF3LmdpdGh1Yi5jb20iDQpsb2NhbCBVUERBVEVfUEFUSCA9ICIvamluZXluZS9ib2wvbWFzdGVyL1lvdXIgVmlrdG9yLmx1YSIuLiI/cmFuZD0iLi5tYXRoLnJhbmRvbSgxLDEwMDAwKQ0KbG9jYWwgVVBEQVRFX0ZJTEVfUEFUSCA9IFNDUklQVF9QQVRILi4iWW91ciBWaWt0b3IubHVhIg0KbG9jYWwgVVBEQVRFX1VSTCA9ICJodHRwczovLyIuLlVQREFURV9IT1NULi5VUERBVEVfUEFUSA0KDQoNCmlmIEFVVE9fVVBEQVRFIHRoZW4NCglsb2NhbCBTZXJ2ZXJEYXRhID0gR2V0V2ViUmVzdWx0KFVQREFURV9IT1NULCAiL2ppbmV5bmUvYm9sL21hc3Rlci92ZXJzaW9uL1lvdXIgVmlrdG9yLnZlcnNpb24iKQ0KCWlmIFNlcnZlckRhdGEgdGhlbg0KCQlTZXJ2ZXJWZXJzaW9uID0gdHlwZSh0b251bWJlcihTZXJ2ZXJEYXRhKSkgPT0gIm51bWJlciIgYW5kIHRvbnVtYmVyKFNlcnZlckRhdGEpIG9yIG5pbA0KCQlpZiBTZXJ2ZXJWZXJzaW9uIHRoZW4NCgkJCWlmIHRvbnVtYmVyKHZlcnNpb24pIDwgU2VydmVyVmVyc2lvbiB0aGVuDQoJCQkJQXV0b3VwZGF0ZXJNc2coIk5ldyB2ZXJzaW9uIGF2YWlsYWJsZSIuLlNlcnZlclZlcnNpb24pDQoJCQkJQXV0b3VwZGF0ZXJNc2coIlVwZGF0aW5nLCBwbGVhc2UgZG9uJ3QgcHJlc3MgRjkiKQ0KCQkJCURlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgRG93bmxvYWRGaWxlKFVQREFURV9VUkwsIFVQREFURV9GSUxFX1BBVEgsIGZ1bmN0aW9uICgpIEF1dG91cGRhdGVyTXNnKCJTdWNjZXNzZnVsbHkgdXBkYXRlZC4gKCIuLnZlcnNpb24uLiIgPT4gIi4uU2VydmVyVmVyc2lvbi4uIiksIHByZXNzIEY5IHR3aWNlIHRvIGxvYWQgdGhlIHVwZGF0ZWQgdmVyc2lvbi4iKSBlbmQpIGVuZCwgMykNCgkJCWVsc2UNCgkJCQlBdXRvdXBkYXRlck1zZygiWW91IGhhdmUgZ290IHRoZSBsYXRlc3QgdmVyc2lvbiAoIi4uU2VydmVyVmVyc2lvbi4uIikiKQ0KCQkJZW5kDQoJCWVuZA0KCWVsc2UNCgkJQXV0b3VwZGF0ZXJNc2coIkVycm9yIGRvd25sb2FkaW5nIHZlcnNpb24gaW5mbyIpDQoJZW5kDQplbmQNCg0KDQpyZXF1aXJlICJTb3VyY2VMaWIiDQpyZXF1aXJlICJEaXZpbmVQcmVkIg0KDQpsb2NhbCBRID0ge1JhbmNlID0gNzQwLCBJc1JlYWR5ID0gZnVuY3Rpb24oKSByZXR1cm4gbXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWSBlbmQsIERhbWFnZSA9IGZ1bmN0aW9uKHRhcmdldCkgcmV0dXJuIGdldERtZygiUSIsIHRhcmdldCwgbXlIZXJvKSBlbmQsfQ0KbG9jYWwgVyA9IHtSYW5jZSA9IDcwMCwgSXNSZWFkeSA9IGZ1bmN0aW9uKCkgcmV0dXJuIG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkgZW5kLCBEYW1hZ2UgPSBmdW5jdGlvbih0YXJnZXQpIHJldHVybiBnZXREbWcoIlciLCB0YXJnZXQsIG15SGVybykgZW5kLH0NCmxvY2FsIEUgPSB7UmFuY2UgPSA3NjAsIFNwZWVkID0gNzUwLCBNaW5SYW5jZSA9IDU0MCwgTWF4UmFuY2UgPSAxMjAwLCBSYWRpdXMgPSA3NSwgRGVsYXkgPSAxNzUsIElzUmVhZHkgPSBmdW5jdGlvbigpIHJldHVybiBteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGVuZCwgRGFtYWdlID0gZnVuY3Rpb24odGFyZ2V0KSByZXR1cm4gZ2V0RG1nKCJFIiwgdGFyZ2V0LCBteUhlcm8pIGVuZCx9DQpsb2NhbCBSID0ge1JhbmNlID0gNzAwLCBJc1JlYWR5ID0gZnVuY3Rpb24oKSByZXR1cm4gbXlIZXJvOkNhblVzZVNwZWxsKF9SKSA9PSBSRUFEWSBlbmQsIERhbWFnZSA9IGZ1bmN0aW9uKHRhcmdldCkgcmV0dXJuIGdldERtZygiUiIsIHRhcmdldCwgbXlIZXJvKSBlbmQsfQ0KDQpsb2NhbCBFbmVteU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgMTUwMCwgcGxheWVyLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KbG9jYWwgdmlrdG9yRSA9IExpbmVTUyhFLlNwZWVkLEUuUmFuY2UsRS5SYWRpdXMsRS5EZWxheSxtYXRoLmh1Z2UpDQpsb2NhbCBwbGF5ZXIgPSBteUhlcm8NCmxvY2FsIHRzLCBTeE8NCmxvY2FsIE1NQUxvYWRlZCwgU3hPTG9hZGVkLCBSZWJvcm5Mb2FkZWQsIFJldmFtcGVkTG9hZGVkLCBTT1dMb2FkZWQgPSBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UNCmxvY2FsIGVuZW15SGVyb2VzID0gR2V0RW5lbXlIZXJvZXMoKQ0KbG9jYWwgSnVuZ2xlTW9icyA9IHt9DQpsb2NhbCBKdW5nbGVGb2N1c01vYnMgPSB7fQ0KDQpsb2NhbCBUb0ludGVycnVwdCA9IHt9DQpsb2NhbCBJbnRlcnJ1cHQgPSB7fQ0KbG9jYWwgSW50ZXJydXB0TGlzdCA9IHsNCiAgICB7Y2hhck5hbWUgPSAiQ2FpdGx5biIsIHNwZWxsTmFtZSA9ICJDYWl0bHluQWNlaW50aGVIb2xlIn0sDQogICAge2NoYXJOYW1lID0gIkZpZGRsZVN0aWNrcyIsIHNwZWxsTmFtZSA9ICJDcm93c3Rvcm0ifSwNCiAgICB7Y2hhck5hbWUgPSAiRmlkZGxlU3RpY2tzIiwgc3BlbGxOYW1lID0gIkRyYWluIn0sDQogICAge2NoYXJOYW1lID0gIkdhbGlvIiwgc3BlbGxOYW1lID0gIkdhbGlvSWRvbE9mRHVyYW5kIn0sDQogICAge2NoYXJOYW1lID0gIkthcnRodXMiLCBzcGVsbE5hbWUgPSAiRmFsbGVuT25lIn0sDQogICAge2NoYXJOYW1lID0gIkthdGFyaW5hIiwgc3BlbGxOYW1lID0gIkthdGFyaW5hUiJ9LA0KICAgIHtjaGFyTmFtZSA9ICJNYWx6YWhhciIsIHNwZWxsTmFtZSA9ICJBbFphaGFyTmV0aGVyR3Jhc3AifSwNCiAgICB7Y2hhck5hbWUgPSAiTWlzc0ZvcnR1bmUiLCBzcGVsbE5hbWUgPSAiTWlzc0ZvcnR1bmVCdWxsZXRUaW1lIn0sDQogICAge2NoYXJOYW1lID0gIk51bnUiLCBzcGVsbE5hbWUgPSAiQWJzb2x1dGVaZXJvIn0sDQogICAge2NoYXJOYW1lID0gIlBhbnRoZW9uIiwgc3BlbGxOYW1lID0gIlBhbnRoZW9uX0dyYW5kU2t5ZmFsbF9KdW1wIn0sDQogICAge2NoYXJOYW1lID0gIlNoZW4iLCBzcGVsbE5hbWUgPSAiU2hlblN0YW5kVW5pdGVkIn0sDQogICAge2NoYXJOYW1lID0gIlVyZ290Iiwgc3BlbGxOYW1lID0gIlVyZ290U3dhcDIifSwNCiAgICB7Y2hhck5hbWUgPSAiVmFydXMiLCBzcGVsbE5hbWUgPSAiVmFydXNRIn0sDQogICAge2NoYXJOYW1lID0gIldhcndpY2siLCBzcGVsbE5hbWUgPSAiSW5maW5pdGVEdXJlc3MifQ0KfQ0KDQpsb2NhbCBmdW5jdGlvbiBPcmJMb2FkKCkNCglpZiBfRy5NTUFfTG9hZGVkIHRoZW4NCgkJTU1BTG9hZGVkID0gdHJ1ZQ0KCQlBdXRvdXBkYXRlck1zZygiRm91bmQgTU1BIikNCgllbHNlaWYgX0cuQXV0b0NhcnJ5IHRoZW4NCgkJaWYgX0cuQXV0b0NhcnJ5LkhlbHBlciB0aGVuDQoJCQlSZWJvcm5Mb2FkZWQgPSB0cnVlDQoJCQlBdXRvdXBkYXRlck1zZygiRm91bmQgU0FDOiBSZWJvcm4iKQ0KCQllbHNlDQoJCQlSZXZhbXBlZExvYWRlZCA9IHRydWUNCgkJCUF1dG91cGRhdGVyTXNnKCJGb3VuZCBTQUM6IFJldmFtcGVkIikNCgkJZW5kDQoJZWxzZWlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KCQlEZWxheUFjdGlvbihPcmJMb2FkLCAxKQ0KCWVsc2VpZiBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQoJCXJlcXVpcmUgJ1N4T3JiV2FsaycNCgkJU3hPID0gU3hPcmJXYWxrKCkNCgkJU3hPTG9hZGVkID0gdHJ1ZQ0KCQlBdXRvdXBkYXRlck1zZygiTG9hZGVkIFN4T3JiIikNCgllbHNlaWYgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTT1cubHVhIikgdGhlbg0KCQlyZXF1aXJlICdTT1cnDQoJCVNPV2kgPSBTT1coVlApDQoJCVNPV0xvYWRlZCA9IHRydWUNCgkJU2NyaXB0TXNnKCJMb2FkZWQgU09XIikNCgllbHNlDQoJCUF1dG91cGRhdGVyTXNnKCJDYW50IEZpbmUgT3JiV2Fsa2VyIikNCgllbmQNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiBPcmJSZXNldCgpDQoJaWYgTU1BTG9hZGVkIHRoZW4NCgkJX0cuTU1BX1Jlc2V0QXV0b0F0dGFjaygpDQoJZWxzZWlmIFN4T3JiTG9hZGVkIHRoZW4NCgkJU3hPOlJlc2V0QUEoKQ0KCWVsc2VpZiBTT1dMb2FkZWQgdGhlbg0KCQlTT1c6cmVzZXRBQSgpDQoJZW5kDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gT3JiVGFyZ2V0KHJhbmNlKQ0KCWxvY2FsIFQNCglpZiBNTUFMb2FkIHRoZW4gVCA9IF9HLk1NQV9UYXJnZXQgZW5kDQoJaWYgUmVib3JuTG9hZCB0aGVuIFQgPSBfRy5BdXRvQ2FycnkuQ3Jvc3NoYWlyLkF0dGFja19Dcm9zc2hhaXIudGFyZ2V0IGVuZA0KCWlmIFJldmFtcGVkTG9hZGVkIHRoZW4gVCA9IF9HLkF1dG9DYXJyeS5PcmJ3YWxrZXIudGFyZ2V0IGVuZA0KCWlmIFN4T0xvYWQgdGhlbiBUID0gU3hPOkdldFRhcmdldCgpIGVuZA0KCWlmIFQgPT0gbmlsIHRoZW4gDQoJCVQgPSBTVFM6R2V0VGFyZ2V0KHJhbmNlKQ0KCWVuZA0KCWlmIFQgYW5kIFQudHlwZSA9PSBwbGF5ZXIudHlwZSBhbmQgVmFsaWRUYXJnZXQoVCwgcmFuY2UpIHRoZW4NCgkJcmV0dXJuIFQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBzZXR0aW5nKCkNCg0KCWlmIG5vdCBUd2lzdGVkVHJlZWxpbmUgdGhlbg0KCQlKdW5nbGVNb2JOYW1lcyA9IHsNCgkJCVsiU1JVX0tydWdNaW5pNS4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfUmVkTWluaTQuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZE1pbmk0LjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pMy4xLjIiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pMy4xLjMiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pMy4xLjQiXQk9IHRydWUsDQoJCQlbIlNSVV9NdXJrd29sZk1pbmkyLjEuMiJdCT0gdHJ1ZSwNCgkJCVsiU1JVX011cmt3b2xmTWluaTIuMS4zIl0JPSB0cnVlLA0KCQkJWyJTUlVfQmx1ZU1pbmkxLjEuMiJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlTWluaTIxLjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlTWluaTcuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX0JsdWVNaW5pMjcuMS4zIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX011cmt3b2xrTWluaTguMS4yIl0JPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGtNaW5pOC4xLjMiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pOS4xLjIiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pOS4xLjMiXQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWtNaW5pOS4xLjQiXQk9IHRydWUsDQoJCQlbIlNSVV9SZWRNaW5pMTAuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZE1pbmkxMC4xLjMiXQkJPSB0cnVlLA0KCQkJWyJTUlVfS3J1Z01pbmkxMS4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfQmFyb24xMi4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0RyYWdvbjYuMS4xIl0JCQk9IHRydWUsDQoJCX0NCg0KCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQkJWyJTUlVfS3J1ZzUuMS4yIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9SZWQ0LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrMy4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGYyLjEuMSJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlMS4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0dyb21wMTMuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9Hcm9tcDE0LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfQmx1ZTcuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9NdXJrd29sazguMS4xIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVhazkuMS4xIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZDEwLjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfS3J1ZzExLjEuMiJdCQkJPSB0cnVlLA0KCQl9DQoJZWxzZQ0KCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQl9DQoJCUp1bmdsZU1vYk5hbWVzID0gew0KCQl9DQoJZW5kDQoNCglmb3IgaSA9IDAsIG9iak1hbmFnZXIubWF4T2JqZWN0cyBkbw0KCQlsb2NhbCBvYmplY3QgPSBvYmpNYW5hZ2VyOmdldE9iamVjdChpKQ0KCQlpZiBvYmplY3QgYW5kIG9iamVjdC52YWxpZCBhbmQgbm90IG9iamVjdC5kZWFkIHRoZW4NCgkJCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqZWN0Lm5hbWVdIHRoZW4NCgkJCQlKdW5nbGVGb2N1c01vYnNbI0p1bmdsZUZvY3VzTW9icysxXSA9IG9iamVjdA0KCQkJZWxzZWlmIEp1bmdsZU1vYk5hbWVzW29iamVjdC5uYW1lXSB0aGVuDQoJCQkJSnVuZ2xlTW9ic1sjSnVuZ2xlTW9icysxXSA9IG9iamVjdA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEp1bmdsZU1vYihyYW5jZSkNCglmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZUZvY3VzTW9icykgZG8NCgkJaWYgVmFsaWRUYXJnZXQoTW9iLCByYW5jZSkgdGhlbiByZXR1cm4gTW9iIGVuZA0KCWVuZA0KCWZvciBfLCBNb2IgaW4gcGFpcnMoSnVuZ2xlTW9icykgZG8NCgkJaWYgVmFsaWRUYXJnZXQoTW9iLCByYW5jZSkgdGhlbiByZXR1cm4gTW9iIGVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldEhQQmFyUG9zKGVuZW15KQ0KCWVuZW15LmJhckRhdGEgPSB7UGVyY2VudGFnZU9mZnNldCA9IHt4ID0gLTAuMDUsIHkgPSAwfX0tLUdldEVuZW15QmFyRGF0YSgpDQoJbG9jYWwgYmFyUG9zID0gR2V0VW5pdEhQQmFyUG9zKGVuZW15KQ0KCWxvY2FsIGJhclBvc09mZnNldCA9IEdldFVuaXRIUEJhck9mZnNldChlbmVteSkNCglsb2NhbCBiYXJPZmZzZXQgPSB7IHggPSBlbmVteS5iYXJEYXRhLlBlcmNlbnRhZ2VPZmZzZXQueCwgeSA9IGVuZW15LmJhckRhdGEuUGVyY2VudGFnZU9mZnNldC55IH0NCglsb2NhbCBiYXJQb3NQZXJjZW50YWdlT2Zmc2V0ID0geyB4ID0gZW5lbXkuYmFyRGF0YS5QZXJjZW50YWdlT2Zmc2V0LngsIHkgPSBlbmVteS5iYXJEYXRhLlBlcmNlbnRhZ2VPZmZzZXQueSB9DQoJbG9jYWwgQmFyUG9zT2Zmc2V0WCA9IDE3MQ0KCWxvY2FsIEJhclBvc09mZnNldFkgPSA0Ng0KCWxvY2FsIENvcnJlY3Rpb25ZID0gMzkNCglsb2NhbCBTdGFydEhwUG9zID0gMzENCg0KCWJhclBvcy54ID0gbWF0aC5mbG9vcihiYXJQb3MueCArIChiYXJQb3NPZmZzZXQueCAtIDAuNSArIGJhclBvc1BlcmNlbnRhZ2VPZmZzZXQueCkgKiBCYXJQb3NPZmZzZXRYICsgU3RhcnRIcFBvcykNCgliYXJQb3MueSA9IG1hdGguZmxvb3IoYmFyUG9zLnkgKyAoYmFyUG9zT2Zmc2V0LnkgLSAwLjUgKyBiYXJQb3NQZXJjZW50YWdlT2Zmc2V0LnkpICogQmFyUG9zT2Zmc2V0WSArIENvcnJlY3Rpb25ZKQ0KDQoJbG9jYWwgU3RhcnRQb3MgPSBWZWN0b3IoYmFyUG9zLnggLCBiYXJQb3MueSwgMCkNCglsb2NhbCBFbmRQb3MgPSAgVmVjdG9yKGJhclBvcy54ICsgMTA4ICwgYmFyUG9zLnkgLCAwKQ0KCXJldHVybiBWZWN0b3IoU3RhcnRQb3MueCwgU3RhcnRQb3MueSwgMCksIFZlY3RvcihFbmRQb3MueCwgRW5kUG9zLnksIDApDQplbmQNCg0KDQpmdW5jdGlvbiBPbkxvYWQoKQ0KCUF1dG91cGRhdGVyTXNnKCJMT0FEIik7DQoJDQoJT3JiTG9hZCgpDQoJU1RTID0gU2ltcGxlVFMoKQ0KCWRwID0gRGl2aW5lUHJlZCgpIA0KCQ0KCU9uTG9hZE1lbnUoKQ0KCWlmIEdldEdhbWUoKS5tYXAuc2hvcnROYW1lID09ICJ0d2lzdGVkVHJlZWxpbmUiIHRoZW4NCgkJVHdpc3RlZFRyZWVsaW5lID0gdHJ1ZQ0KCWVsc2UNCgkJVHdpc3RlZFRyZWVsaW5lID0gZmFsc2UNCgllbmQNCglmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbw0KICAgICAgICBsb2NhbCBoZXJvID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KCQlmb3IgXywgY2hhbXAgaW4gcGFpcnMoSW50ZXJydXB0TGlzdCkgZG8NCgkJCWlmIGhlcm8uY2hhck5hbWUgPT0gY2hhbXAuY2hhck5hbWUgdGhlbg0KCQkJCXRhYmxlLmluc2VydChUb0ludGVycnVwdCwgY2hhbXAuc3BlbGxOYW1lKQ0KCQkJZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uRHJhdygpDQoJaWYgQ29uZmlnLkRyYXcuRHJhd1EgdGhlbg0KCQlEcmF3Q2lyY2xlKHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLnosIFEuUmFuY2UsIFRBUkdCKENvbmZpZy5EcmF3LkRyYXdRQ29sb3IpKQ0KCWVuZA0KCWlmIENvbmZpZy5EcmF3LkRyYXdXIHRoZW4NCgkJRHJhd0NpcmNsZShwbGF5ZXIueCwgcGxheWVyLnksIHBsYXllci56LCBXLlJhbmNlLCBUQVJHQihDb25maWcuRHJhdy5EcmF3V0NvbG9yKSkNCgllbmQNCglpZiBDb25maWcuRHJhdy5EcmF3RSB0aGVuDQoJCURyYXdDaXJjbGUocGxheWVyLngsIHBsYXllci55LCBwbGF5ZXIueiwgRS5NYXhSYW5jZSwgVEFSR0IoQ29uZmlnLkRyYXcuRHJhd0VDb2xvcikpDQoJZW5kDQoJaWYgQ29uZmlnLkRyYXcuRHJhd1IgdGhlbg0KCQlEcmF3Q2lyY2xlKHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLnosIFIuUmFuY2UsIFRBUkdCKENvbmZpZy5EcmF3LkRyYXdSQ29sb3IpKQ0KCWVuZA0KCWZvciBpLCBqIGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlpZiBHZXREaXN0YW5jZShqKSA8IDIwMDAgYW5kIG5vdCBqLmRlYWQgYW5kIENvbmZpZy5BZHMuZG0gdGhlbg0KCQkJbG9jYWwgcG9zID0gR2V0SFBCYXJQb3MoaikNCgkJCWxvY2FsIGRtZyA9IEdldFNwZWxsRG1nKGopDQoNCgkJCWxvY2FsIHBvczIgPSAoKGouaGVhbHRoIC0gZG1nKS9qLm1heEhlYWx0aCkqMTAwDQoJCQlEcmF3TGluZShwb3MueCtwb3MyLCBwb3MueSwgcG9zLngrcG9zMiwgcG9zLnktMzAsIDEsIDB4ZmZmZjAwMDApDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldFNwZWxsRG1nKGVuZW15KQ0KCWxvY2FsIGNvbWJvZG1nDQoJbG9jYWwgUWRtZyA9IGdldERtZygiUSIsIGVuZW15LCBwbGF5ZXIpDQoJbG9jYWwgRWRtZyA9IGdldERtZygiRSIsIGVuZW15LCBwbGF5ZXIpDQoJbG9jYWwgUmRtZyA9IGdldERtZygiUiIsIGVuZW15LCBwbGF5ZXIpDQoJDQoJY29tYm9kbWcgPSBRZG1nK0VkbWcrUmRtZw0KCXJldHVybiBjb21ib2RtZw0KZW5kDQoNCmZ1bmN0aW9uIE9uTG9hZE1lbnUoKQ0KCQ0KCUNvbmZpZyA9IHNjcmlwdENvbmZpZygiWW91ciBWaWN0b3IiLCAiWW91ciBWaWN0b3IiKTsNCgkJQ29uZmlnOmFkZFN1Yk1lbnUoIkhvdEtleSIsICJIb3RLZXkiKQ0KCQkJQ29uZmlnLkhvdEtleTphZGRQYXJhbSgiQ29tYm8iLCAiQ29tYm8gQWN0aXZlIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKTsNCgkJCUNvbmZpZy5Ib3RLZXk6YWRkUGFyYW0oIkhhcmFzcyIsICJIYXJhc3MgQWN0aXZlIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQoJCQlDb25maWcuSG90S2V5OmFkZFBhcmFtKCJIYXJhc3NUb2dnbGUiLCAiSGFyYXNzIFRvZ2dsZSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJHIikpDQoJCQlDb25maWcuSG90S2V5OmFkZFBhcmFtKCJDbGVhciIsICJMaW5lIENsZWFyIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQoJCQktLUNvbmZpZy5Ib3RLZXk6YWRkUGFyYW0oIkRlYnVnIiwgIkRlYnVnIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJHIikpDQoJCQkNCgkJQ29uZmlnOmFkZFN1Yk1lbnUoIkNvbWJvIiwgIkNvbWJvIikNCgkJCUNvbmZpZy5Db21ibzphZGRQYXJhbSgiVXNlUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5Db21ibzphZGRQYXJhbSgiVXNlVyIsICJVc2UgVyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5Db21ibzphZGRQYXJhbSgiVXNlRSIsICJVc2UgRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCS0tQ29uZmlnLkNvbWJvOmFkZFBhcmFtKCJVc2VSIiwgIlVzZSBSIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJQ29uZmlnLkNvbWJvOmFkZFBhcmFtKCJGdWxsQ29tYm8iLCAiVXNlIEZ1bGxDb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5Db21ibzphZGRQYXJhbSgiRnVsbENvbWJvSGVhbHRoIiwgIlVzZSBGdWxsQ29tYm8gJSBIZWFsdGgiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDYwLCAwLCAxMDAsIDApDQoJCQlDb25maWcuQ29tYm86YWRkUGFyYW0oIkZ1bGxDb21ib1R5cGUiLCAiRnVsbCBDb21ibyBUeXBlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiVXNlIEFsbCBTa2lsbCBBbHdheSIsICJVc2UgTm90IEFsbCBTa2lsbCJ9KQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJIYXJhc3MiLCAiSGFyYXNzIikNCgkJCUNvbmZpZy5IYXJhc3M6YWRkUGFyYW0oIlVzZVEiLCAiVXNlIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuSGFyYXNzOmFkZFBhcmFtKCJVc2VFIiwgIlVzZSBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJQ29uZmlnLkhhcmFzczphZGRQYXJhbSgiTWFuYSIsICJNYW5hTWFuYWdlciIsIFNDUklQVF9QQVJBTV9TTElDRSwgNTAsIDAsIDEwMCwgMCkNCgkJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiQ2xlYXIiLCAiQ2xlYXIiKQ0KCQkJQ29uZmlnLkNsZWFyOmFkZFBhcmFtKCJVc2VRIiwgIlVzZSBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJQ29uZmlnLkNsZWFyOmFkZFBhcmFtKCJVc2VFIiwgIlVzZSBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJRU2V0dGluZyIsICJRU2V0dGluZyIpDQoJCQlDb25maWcuUVNldHRpbmc6YWRkUGFyYW0oIktpbGxTdGVhbCIsICJLaWxsU3RlYWwiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQkNCgkJQ29uZmlnOmFkZFN1Yk1lbnUoIldTZXR0aW5nIiwgIldTZXR0aW5nIikNCgkJCS0tQ29uZmlnLldTZXR0aW5nOmFkZFBhcmFtKCJLaWxsU3RlYWwiLCAiS2lsbFN0ZWFsIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJQ29uZmlnLldTZXR0aW5nOmFkZFBhcmFtKCJpbnRlcnJ1cHQiLCAiaW50ZXJydXB0IE9uIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJFU2V0dGluZyIsICJFU2V0dGluZyIpDQoJCQlDb25maWcuRVNldHRpbmc6YWRkUGFyYW0oIktpbGxTdGVhbCIsICJLaWxsU3RlYWwiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuRVNldHRpbmc6YWRkUGFyYW0oIkxvZ2ljIiwgIkNob29zZSBMb2dpYyIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IkxvZ2ljIDEiLCAiTG9naWMgMiJ9KQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJSU2V0dGluZyIsICJSU2V0dGluZyIpDQoJCQlDb25maWcuUlNldHRpbmc6YWRkUGFyYW0oIktpbGxTdGVhbCIsICJLaWxsU3RlYWwiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuUlNldHRpbmc6YWRkUGFyYW0oImludGVycnVwdCIsICJpbnRlcnJ1cHQgT24iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiQWRzIiwgIkFkcyIpDQoJCQlDb25maWcuQWRzOmFkZFBhcmFtKCJQcmlvcml0eSIsICJpbnRlcnJ1cHQgUHJpb3JpdHkiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJXLVIiLCAiUi1XIn0pDQoJCQlDb25maWcuQWRzOmFkZFBhcmFtKCJkbSIsICJEYW1hZ2VNYW5hZ2VyIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJDQoJCUNvbmZpZzphZGRTdWJNZW51KCJEcmF3IiwgIkRyYXciKQ0KCQkJQ29uZmlnLkRyYXc6YWRkUGFyYW0oIkRyYXdRIiwgIkRyYXcgUSBSYW5jZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5EcmF3OmFkZFBhcmFtKCJEcmF3UUNvbG9yIiwgIkRyYXcgUSBDb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezEwMCwgMjU1LCAwLCAwfSkNCgkJCUNvbmZpZy5EcmF3OmFkZFBhcmFtKCJEcmF3VyIsICJEcmF3IFcgUmFuY2UiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlDb25maWcuRHJhdzphZGRQYXJhbSgiRHJhd1dDb2xvciIsICJEcmF3IFcgQ29sb3IiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsIHsxMDAsIDI1NSwgMCwgMH0pDQoJCQlDb25maWcuRHJhdzphZGRQYXJhbSgiRHJhd0UiLCAiRHJhdyBFIFJhbmNlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJQ29uZmlnLkRyYXc6YWRkUGFyYW0oIkRyYXdFQ29sb3IiLCAiRHJhdyBFIENvbG9yIiwgU0NSSVBUX1BBUkFNX0NPTE9SLCB7MTAwLCAyNTUsIDAsIDB9KQ0KCQkJQ29uZmlnLkRyYXc6YWRkUGFyYW0oIkRyYXdSIiwgIkRyYXcgUiBSYW5jZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUNvbmZpZy5EcmF3OmFkZFBhcmFtKCJEcmF3UkNvbG9yIiwgIkRyYXcgUiBDb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezEwMCwgMjU1LCAwLCAwfSkNCgkJCQ0KCQlDb25maWc6YWRkU3ViTWVudSgiT3JiV2FsayIsICJPcmJXYWxrIikNCgkJaWYgU3hPTG9hZGVkIHRoZW4NCgkJCUNvbmZpZy5PcmJXYWxrOmFkZFBhcmFtKCJpbmZvMCIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQoJCQlDb25maWcuT3JiV2FsazphZGRQYXJhbSgiaW5mbzEiLCAiU3hPcmJXYWxrIHNldHRpbmdzIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KCQkJU3hPOkxvYWRUb01lbnUoQ29uZmlnLk9yYldhbGspDQoJCWVsc2VpZiBNTUFMb2FkZWQgdGhlbg0KCQkJQ29uZmlnLk9yYldhbGs6YWRkUGFyYW0oInIiLCJNTUEgUm9hZCIsIFNDUklQVF9QQVJBTV9JTkZPKQ0KCQllbHNlaWYgU09XTG9hZGVkIHRoZW4NCgkJCUNvbmZpZy5PcmJXYWxrOmFkZFBhcmFtKCJpbmZvMCIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQoJCQlDb25maWcuT3JiV2FsazphZGRQYXJhbSgiaW5mbzEiLCAiU09XIHNldHRpbmdzIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KCQkJU09XaTpMb2FkVG9NZW51KENvbmZpZy5PcmJXYWxrKQ0KCQllbHNlDQoJCQlDb25maWcuT3JiV2FsazphZGRQYXJhbSgiciIsIlNBQyBMb2FkIiwgU0NSSVBUX1BBUkFNX0lORk8pDQoJCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uVGljaygpDQoJbG9jYWwgVGFyZ2V0ID0gT3JiVGFyZ2V0KDE1MDApDQoJaWYgQ29uZmlnLkhvdEtleS5Db21ibyB0aGVuDQoJCUNvbWJvKCkNCgllbHNlaWYgQ29uZmlnLkhvdEtleS5IYXJhc3Mgb3IgQ29uZmlnLkhvdEtleS5IYXJhc3NUb2dnbGUgdGhlbg0KCQlIYXJhc3MoKQ0KCWVsc2VpZiBDb25maWcuSG90S2V5LkNsZWFyIHRoZW4NCgkJQ2xlYXIoKQ0KCWVsc2VpZiBDb25maWcuSG90S2V5LkRlYnVnIHRoZW4NCgkJRGVidWcoKQ0KCWVuZA0KCWtpbGxzdGVhbCgpDQplbmQNCg0KZnVuY3Rpb24gQ29tYm8oKQ0KCWxvY2FsIFRhcmdldCA9IE9yYlRhcmdldCgxNTAwKQ0KCWlmIFRhcmdldCB+PSBuaWwgdGhlbg0KCQlpZiBDb25maWcuQ29tYm8uRnVsbENvbWJvIGFuZCBUYXJnZXQuaGVhbHRoIDwgKFRhcmdldC5tYXhIZWFsdGgqKENvbmZpZy5Db21iby5GdWxsQ29tYm9IZWFsdGgqMC4wMSkpIHRoZW4NCgkJCUZ1bGxDb21ibyhUYXJnZXQpDQoJCWVsc2UNCgkJCU5vcm1hbENvbWJvKFRhcmdldCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gTm9ybWFsQ29tYm8oVGFyZ2V0KQ0KCWlmIFRhcmdldCB+PSBuaWwgdGhlbg0KCQlpZiBDb25maWcuQ29tYm8uVXNlUSB0aGVuDQoJCQlDYXN0UShUYXJnZXQpDQoJCWVuZA0KCQlpZiBDb25maWcuQ29tYm8uVXNlVyB0aGVuDQoJCQlDYXN0VyhUYXJnZXQpDQoJCWVuZA0KCQlpZiBDb25maWcuQ29tYm8uVXNlRSB0aGVuDQoJCQlDYXN0RShUYXJnZXQpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEZ1bGxDb21ibyhUYXJnZXQpDQoJaWYgVGFyZ2V0IH49IG5pbCB0aGVuDQoJCWlmIENvbmZpZy5Db21iby5GdWxsQ29tYm9UeXBlID09IDEgdGhlbg0KCQkJaWYgUS5Jc1JlYWR5KCkgYW5kIFcuSXNSZWFkeSgpIGFuZCBFLklzUmVhZHkoKSBhbmQgUi5Jc1JlYWR5KCkgdGhlbg0KCQkJCURlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFIoVGFyZ2V0KSBlbmQsIDAuMSkNCgkJCQlEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RXKFRhcmdldCkgZW5kLCAwLjEpDQoJCQkJRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0UShUYXJnZXQpIGVuZCwgMC4xKQ0KCQkJCURlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdEUoVGFyZ2V0KSBlbmQsIDAuMikNCgkJCWVuZA0KCQllbHNlaWYgQ29uZmlnLkNvbWJvLkZ1bGxDb21ib1R5cGUgPT0gMiB0aGVuDQoJCQlpZiBSLklzUmVhZHkoKSB0aGVuDQoJCQkJQ2FzdFIoVGFyZ2V0KTsNCgkJCWVuZA0KCQkJaWYgVy5Jc1JlYWR5KCkgdGhlbg0KCQkJCUNhc3RXKFRhcmdldCk7DQoJCQllbmQNCgkJCWlmIFEuSXNSZWFkeSgpIHRoZW4NCgkJCQlDYXN0UShUYXJnZXQpOw0KCQkJZW5kDQoJCQlpZiBFLklzUmVhZHkoKSB0aGVuDQoJCQkJQ2FzdEUoVGFyZ2V0KTsNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIYXJhc3MoKQ0KCWxvY2FsIFRhcmdldCA9IE9yYlRhcmdldCgxNTAwKQ0KCWlmIFRhcmdldCB+PSBuaWwgYW5kIG15SGVyby5tYW5hID4gKG15SGVyby5tYXhNYW5hKihDb25maWcuSGFyYXNzLk1hbmEqMC4wMSkpIHRoZW4NCgkJaWYgQ29uZmlnLkhhcmFzcy5Vc2VRIGFuZCBRLklzUmVhZHkoKSB0aGVuDQoJCQlDYXN0UShUYXJnZXQpDQoJCWVuZA0KCQlpZiBDb25maWcuSGFyYXNzLlVzZUUgYW5kIEUuSXNSZWFkeSgpIHRoZW4NCgkJCUNhc3RFKFRhcmdldCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQ2xlYXIoKQ0KCXNldHRpbmcoKQ0KCWxvY2FsIHQgPSBHZXRKdW5nbGVNb2IoMTUwMCkNCglpZiB0IH49IG5pbCB0aGVuDQoJCWlmIG5vdCB0LmRlYWQgYW5kIFEuSXNSZWFkeSgpIGFuZCBDb25maWcuQ2xlYXIuVXNlUSB0aGVuDQoJCQlDYXN0USh0KQ0KCQllbmQNCgkJaWYgbm90IHQuZGVhZCBhbmQgRS5Jc1JlYWR5KCkgYW5kIENvbmZpZy5DbGVhci5Vc2VFIHRoZW4NCgkJCUNhc3RFKHQpDQoJCWVuZA0KCWVsc2UNCgkJRW5lbXlNaW5pb25zOnVwZGF0ZSgpDQoJCWZvciBpLCBtaW5pb24gaW4gcGFpcnMoRW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQoJCQlpZiBDb25maWcuQ2xlYXIuVXNlRSBhbmQgRS5Jc1JlYWR5KCkgdGhlbg0KCQkJaWYgbWluaW9uIH49IG5pbCBhbmQgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgIG1pbmlvbi5kZWFkID09IGZhbHNlIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDwgRS5NaW5SYW5jZSB0aGVuDQoJCQkJbG9jYWwgQmVzdFBvcywgYmVzdGhpdCA9IEdldEJlc3RMaW5lRmFybVBvc2l0aW9uKEUuTWluUmFuY2UsIDc1LCBFbmVteU1pbmlvbnMub2JqZWN0cykNCgkJCQlpZiBCZXN0UG9zIH49IG5pbCBhbmQgbm90IG1pbmlvbi5kZWFkIHRoZW4NCgkJCQkJQ2FzdEUoQmVzdFBvcykNCgkJCQllbmQNCgkJCWVuZA0KCQkJZW5kDQoJCQlpZiBDb25maWcuQ2xlYXIuVXNlUSBhbmQgUS5Jc1JlYWR5KCkgdGhlbg0KCQkJaWYgbWluaW9uIH49IG5pbCBhbmQgbWluaW9uLmRlYWQgPT0gZmFsc2UgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPCBRLlJhbmNlIHRoZW4NCgkJCQlDYXN0UShtaW5pb24pDQoJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBraWxsc3RlYWwoKQ0KCWZvciBpLCB0IGluIHBhaXJzKGVuZW15SGVyb2VzKSBkbw0KCQlpZiBWYWxpZFRhcmdldCh0KSBhbmQgQ29uZmlnLlFTZXR0aW5nLktpbGxTdGVhbCBhbmQgR2V0RGlzdGFuY2UodCwgcGxheWVyKSA8IFEuUmFuY2UgYW5kIFEuRGFtYWdlKHQpID4gdC5oZWFsdGggYW5kIFEuSXNSZWFkeSgpIHRoZW4NCgkJCUNhc3RRKHQpDQoJCWVuZA0KCQlpZiBWYWxpZFRhcmdldCh0KSBhbmQgQ29uZmlnLkVTZXR0aW5nLktpbGxTdGVhbCBhbmQgR2V0RGlzdGFuY2UodCwgcGxheWVyKSA8IEUuTWF4UmFuY2UgYW5kIEUuRGFtYWdlKHQpID4gdC5oZWFsdGggYW5kIEUuSXNSZWFkeSgpIHRoZW4NCgkJCUNhc3RFKHQpDQoJCWVuZA0KCQlpZiBWYWxpZFRhcmdldCh0KSBhbmQgQ29uZmlnLlJTZXR0aW5nLktpbGxTdGVhbCBhbmQgR2V0RGlzdGFuY2UodCwgcGxheWVyKSA8IFIuUmFuY2UgYW5kIFIuRGFtYWdlKHQpID4gdC5oZWFsdGggYW5kIFIuSXNSZWFkeSgpIHRoZW4NCgkJCUNhc3RSKHQpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RRKFQpDQoJaWYgUS5Jc1JlYWR5KCkgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShULCBwbGF5ZXIpIDwgUS5SYW5jZSB0aGVuDQoJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX1EsIHRhcmdldE5ldHdvcmtJZCA9IFQubmV0d29ya0lEfSk6c2VuZCgpDQoJCQlPcmJSZXNldCgpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RXKFQpDQoJaWYgVy5Jc1JlYWR5KCkgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShULCBwbGF5ZXIpIDwgVy5SYW5jZSB0aGVuDQoJCQlsb2NhbCB0YXJnZXQgPSBEUFRhcmdldChUKQ0KCQkJbG9jYWwgc3RhdGUsaGl0UG9zLHBlcmMgPSBkcDpwcmVkaWN0KHRhcmdldCxDaXJjbGVTUyhtYXRoLmh1Z2UsVy5SYW5jZSwyNTAsMjAwLG1hdGguaHVnZSkpDQoNCgkJCWlmIHN0YXRlPT1Ta2lsbFNob3QuU1RBVFVTLlNVQ0NFU1NfSElUIHRoZW4NCgkJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX1csIHRvWCA9IGhpdFBvcy54LCB0b1kgPSBoaXRQb3MueiwgZnJvbVggPSBoaXRQb3MueCwgZnJvbVkgPSBoaXRQb3Muen0pOnNlbmQoKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RFKFQpDQoJaWYgQ29uZmlnLkVTZXR0aW5nLkxvZ2ljID09IDEgdGhlbg0KCQlFTG9jaWdPbmUoVCk7DQoJZWxzZWlmIENvbmZpZy5FU2V0dGluZy5Mb2dpYyA9PSAyIHRoZW4NCgkJRUxvZ2ljVHdvKFQpOw0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEVMb2NpZ09uZShUKQ0KCWlmIEUuSXNSZWFkeSgpIHRoZW4NCgkJaWYgR2V0RGlzdGFuY2UoVCwgcGxheWVyKSA8IEUuTWF4UmFuY2UgdGhlbg0KCQkJbG9jYWwgdHIgPSBHZXREaXN0YW5jZShteUhlcm8sVCkNCg0KCQkJaWYgdHIJPD0JRS5NaW5SYW5jZSB0aGVuDQoJCQkJUGFja2V0KCJTX0NBU1QiLCB7c3BlbGxJZCA9IF9FLCB0b1ggPSBULngsIHRvWSA9IFQueiwgZnJvbVggPSBULngsIGZyb21ZID0gVC56fSk6c2VuZCgpDQoJCQllbHNlaWYgdHI+RS5NaW5SYW5jZSBhbmQgdHI8IEUuTWF4UmFuY2UgdGhlbg0KCQkJCWxvY2FsIHRhcmdldCA9IERQVGFyZ2V0KFQpDQoJCQkJbG9jYWwgY2FzdFBvc1ggPSAoRS5NaW5SYW5jZSpULngrKHRyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLngpL3RyDQoJCQkJbG9jYWwgY2FzdFBvc1ogPSAoRS5NaW5SYW5jZSpULnorKHRyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLnopL3RyDQoJCQkJbG9jYWwgc3RhdGUsaGl0UG9zLHBlcmMgPSBkcDpwcmVkaWN0KHRhcmdldCx2aWt0b3JFLDIsVmVjdG9yKGNhc3RQb3NYLDAsY2FzdFBvc1opKQ0KCQkJCWlmIHN0YXRlID09IFNraWxsU2hvdC5TVEFUVVMuU1VDQ0VTU19ISVQgdGhlbg0KCQkJCQlpZiBHZXREaXN0YW5jZShteUhlcm8saGl0UG9zKSA+IEUuTWluUmFuY2UgdGhlbgkJCQkJDQoJCQkJCQlsb2NhbCBkaXN0MiA9IEdldERpc3RhbmNlKG15SGVybyxoaXRQb3MpDQoJCQkJCQlsb2NhbCBoaXRQb3NYID0gKEUuTWluUmFuY2UqaGl0UG9zLngrKGRpc3QyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLngpL2Rpc3QyDQoJCQkJCQlsb2NhbCBoaXRQb3NaID0gKEUuTWluUmFuY2UqaGl0UG9zLnorKGRpc3QyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLnopL2Rpc3QyDQoJCQkJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX0UsIHRvWCA9IGhpdFBvc1gsIHRvWSA9IGhpdFBvc1osIGZyb21YID0gaGl0UG9zWCwgZnJvbVkgPSBoaXRQb3NafSk6c2VuZCgpDQoJCQkJCWVsc2UNCgkJCQkJCVBhY2tldCgiU19DQVNUIiwge3NwZWxsSWQgPSBfRSwgdG9YID0gaGl0UG9zLngsIHRvWSA9IGhpdFBvcy56LCBmcm9tWCA9IGhpdFBvcy54LCBmcm9tWSA9IGhpdFBvcy56fSk6c2VuZCgpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEVMb2dpY1R3byhUKQ0KCWlmIEUuSXNSZWFkeSgpIHRoZW4NCgkJaWYgR2V0RGlzdGFuY2UoVCwgcGxheWVyKSA8IEUuTWF4UmFuY2UgdGhlbg0KCQkJbG9jYWwgdHIgPSBHZXREaXN0YW5jZShteUhlcm8sVCkNCg0KCQkJaWYgdHIJPD0JRS5NaW5SYW5jZSB0aGVuDQoJCQkJbG9jYWwgYmVoaW5kID0gYmVoaW5kKG15SGVybywgVCkNCgkJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX0UsIHRvWCA9IFQueCwgdG9ZID0gVC56LCBmcm9tWCA9IGJlaGluZC54LCBmcm9tWSA9IGJlaGluZC56fSk6c2VuZCgpDQoJCQllbHNlaWYgdHI+RS5NaW5SYW5jZSBhbmQgdHI8IEUuTWF4UmFuY2UgdGhlbg0KCQkJCWxvY2FsIHRhcmdldCA9IERQVGFyZ2V0KFQpDQoJCQkJbG9jYWwgY2FzdFBvc1ggPSAoRS5NaW5SYW5jZSpULngrKHRyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLngpL3RyDQoJCQkJbG9jYWwgY2FzdFBvc1ogPSAoRS5NaW5SYW5jZSpULnorKHRyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLnopL3RyDQoJCQkJbG9jYWwgc3RhdGUsaGl0UG9zLHBlcmMgPSBkcDpwcmVkaWN0KHRhcmdldCx2aWt0b3JFLDIsVmVjdG9yKGNhc3RQb3NYLDAsY2FzdFBvc1opKQ0KCQkJCWlmIHN0YXRlID09IFNraWxsU2hvdC5TVEFUVVMuU1VDQ0VTU19ISVQgdGhlbg0KCQkJCQlpZiBHZXREaXN0YW5jZShteUhlcm8saGl0UG9zKSA+IEUuTWluUmFuY2UgdGhlbgkJCQkJDQoJCQkJCQlsb2NhbCBkaXN0MiA9IEdldERpc3RhbmNlKG15SGVybyxoaXRQb3MpDQoJCQkJCQlsb2NhbCBoaXRQb3NYID0gKEUuTWluUmFuY2UqaGl0UG9zLngrKGRpc3QyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLngpL2Rpc3QyDQoJCQkJCQlsb2NhbCBoaXRQb3NaID0gKEUuTWluUmFuY2UqaGl0UG9zLnorKGRpc3QyIC0gRS5NaW5SYW5jZSkqbXlIZXJvLnopL2Rpc3QyDQoJCQkJCQlsb2NhbCBiZWhpbmQgPSBiZWhpbmQobXlIZXJvLCBUKQ0KCQkJCQkJUGFja2V0KCJTX0NBU1QiLCB7c3BlbGxJZCA9IF9FLCB0b1ggPSBoaXRQb3NYLCB0b1kgPSBoaXRQb3NaLCBmcm9tWCA9IGJlaGluZC54LCBmcm9tWSA9IGJlaGluZC56fSk6c2VuZCgpDQoJCQkJCWVsc2UNCgkJCQkJCWxvY2FsIGJlaGluZCA9IGJlaGluZChteUhlcm8sIFQpDQoJCQkJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX0UsIHRvWCA9IGhpdFBvcy54LCB0b1kgPSBoaXRQb3MueiwgZnJvbVggPSBiZWhpbmQueCwgZnJvbVkgPSBiZWhpbmQuen0pOnNlbmQoKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQoNCmZ1bmN0aW9uIENhc3RSKFQpDQoJaWYgUi5Jc1JlYWR5KCkgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShULCBwbGF5ZXIpIDwgUi5SYW5jZSB0aGVuDQoJCQlQYWNrZXQoIlNfQ0FTVCIsIHtzcGVsbElkID0gX1IsIHRvWCA9IFQueCwgdG9ZID0gVC56LCBmcm9tWCA9IFQueCwgZnJvbVkgPSBULnp9KTpzZW5kKCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT25Qcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpDQoJaWYgI1RvSW50ZXJydXB0ID4gMCB0aGVuDQoJCWZvciBfLCBhYmlsaXR5IGluIHBhaXJzKFRvSW50ZXJydXB0KSBkbw0KCQkJaWYgc3BlbGwubmFtZSA9PSBhYmlsaXR5IGFuZCB1bml0LnRlYW0gfj0gcGxheWVyLnRlYW0gdGhlbg0KCQkJCWlmIENvbmZpZy5BZHMuUHJpb3JpdHkgPT0gMSB0aGVuDQoJCQkJCWlmIENvbmZpZy5XU2V0dGluZy5pbnRlcnJ1cHQgYW5kIFcuSXNSZWFkeSgpIGFuZCBHZXREaXN0YW5jZSh1bml0LCBwbGF5ZXIpIDwgVy5SYW5jZSB0aGVuDQoJCQkJCQlDYXN0Vyh1bml0KQ0KCQkJCQllbmQNCgkJCQkJaWYgIENvbmZpZy5SU2V0dGluZy5pbnRlcnJ1cHQgYW5kIFIuSXNSZWFkeSgpIGFuZCBSLklzUmVhZHkoKSA9PSBmYWxzZSBhbmQgR2V0RGlzdGFuY2UodW5pdCwgcGxheWVyKSA8IFIuUmFuY2UgdGhlbg0KCQkJCQkJQ2FzdFIodW5pdCkNCgkJCQkJZW5kDQoJCQkJZWxzZWlmIENvbmZpZy5BZHMuUHJpb3JpdHkgPT0gMiB0aGVuDQoJCQkJCWlmICBDb25maWcuUlNldHRpbmcuaW50ZXJydXB0IGFuZCBSLklzUmVhZHkoKSBhbmQgR2V0RGlzdGFuY2UodW5pdCwgcGxheWVyKSA8IFIuUmFuY2UgdGhlbg0KCQkJCQkJQ2FzdFIodW5pdCkNCgkJCQkJZW5kDQoJCQkJCWlmIENvbmZpZy5XU2V0dGluZy5pbnRlcnJ1cHQgYW5kIFcuSXNSZWFkeSgpIGFuZCBXLklzUmVhZHkoKSA9PSBmYWxzZSBhbmQgR2V0RGlzdGFuY2UodW5pdCwgcGxheWVyKSA8IFcuUmFuY2UgdGhlbg0KCQkJCQkJQ2FzdFcodW5pdCkNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24ocmFuZ2UsIHdpZHRoLCBvYmplY3RzKQ0KICAgIGxvY2FsIEJlc3RQb3MgDQogICAgbG9jYWwgQmVzdEhpdCA9IDANCiAgICBmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbw0KICAgICAgICBsb2NhbCBFbmRQb3MgPSBWZWN0b3IobXlIZXJvKSArIHJhbmdlICogKFZlY3RvcihvYmplY3QpIC0gVmVjdG9yKG15SGVybykpOm5vcm1hbGl6ZWQoKQ0KICAgICAgICBsb2NhbCBoaXQgPSBDb3VudE9iamVjdHNPbkxpbmVTZWdtZW50KG15SGVybywgRW5kUG9zLCB3aWR0aCwgb2JqZWN0cykNCiAgICAgICAgaWYgaGl0ID4gQmVzdEhpdCB0aGVuDQogICAgICAgICAgICBCZXN0SGl0ID0gaGl0DQogICAgICAgICAgICBCZXN0UG9zID0gb2JqZWN0DQogICAgICAgICAgICBpZiBCZXN0SGl0ID09ICNvYmplY3RzIHRoZW4NCiAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiBCZXN0UG9zLCBCZXN0SGl0DQplbmQNCg0KZnVuY3Rpb24gQ291bnRPYmplY3RzT25MaW5lU2VnbWVudChTdGFydFBvcywgRW5kUG9zLCB3aWR0aCwgb2JqZWN0cykNCiAgICBsb2NhbCBuID0gMA0KICAgIGZvciBpLCBvYmplY3QgaW4gaXBhaXJzKG9iamVjdHMpIGRvDQogICAgICAgIGxvY2FsIHBvaW50U2VnbWVudCwgcG9pbnRMaW5lLCBpc09uU2VnbWVudCA9IFZlY3RvclBvaW50UHJvamVjdGlvbk9uTGluZVNlZ21lbnQoU3RhcnRQb3MsIEVuZFBvcywgb2JqZWN0KQ0KICAgICAgICBpZiBpc09uU2VnbWVudCBhbmQgR2V0RGlzdGFuY2VTcXIocG9pbnRTZWdtZW50LCBvYmplY3QpIDwgd2lkdGggKiB3aWR0aCBhbmQgR2V0RGlzdGFuY2VTcXIoU3RhcnRQb3MsIEVuZFBvcykgPiBHZXREaXN0YW5jZVNxcihTdGFydFBvcywgb2JqZWN0KSB0aGVuDQogICAgICAgICAgICBuID0gbiArIDENCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIG4NCmVuZA0KDQpmdW5jdGlvbiBiZWhpbmQodW5pdCwgdGFyZ2V0KQ0KCXJldHVybiB0YXJnZXQgKyBWZWN0b3IodW5pdC54LXRhcmdldC54LHVuaXQueSx1bml0LnotdGFyZ2V0LnopOm5vcm1hbGl6ZWQoKSooR2V0RGlzdGFuY2UodW5pdCx0YXJnZXQpKzEwMCkNCmVuZA=="), nil, "bt", _ENV))()